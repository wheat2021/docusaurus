---
title: plugin-content-docs
sidebar_label: plugin-content-docs
sidebar_position: 1
slug: /api/plugins/@docusaurus/plugin-content-docs
---

# 📦 plugin-content-docs

import APITable from '@site/src/components/APITable';

提供[文档](../../guides/docs/docs-introduction.mdx)功能，是 Docusaurus 的默认文档插件。

## 安装 {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-content-docs
```

:::tip

如果你使用预设 `@docusaurus/preset-classic`，则无需将此插件作为依赖项安装。

你可以通过[预设选项](../../using-plugins.mdx#docusauruspreset-classic)配置此插件。

:::

## 配置 {#configuration}

接受的字段：

```mdx-code-block
<APITable>
```

| 名称 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `path` | `string` | `'docs'` | 文件系统上文档内容目录的路径，相对于站点目录。 |
| `editUrl` | <code>string \| [EditUrlFunction](#EditUrlFunction)</code> | `undefined` | 用于编辑你网站的基础 URL。最终 URL 由 `editUrl + relativeDocPath` 计算得出。使用函数可以对每个文件进行更细致的控制。完全省略此变量将禁用编辑链接。 |
| `editLocalizedFiles` | `boolean` | `false` | 编辑 URL 将指向本地化文件，而不是原始的未本地化文件。当 `editUrl` 是一个函数时，此选项将被忽略。 |
| `editCurrentVersion` | `boolean` | `false` | 编辑 URL 将始终指向当前版本的文档，而不是旧版本。当 `editUrl` 是一个函数时，此选项将被忽略。 |
| `routeBasePath` | `string` | `'docs'` | 你网站文档部分的 URL 路由。**不要**包含尾部斜杠。使用 `/` 来发布不带基础路径的文档。 |
| `tagsBasePath` | `string` | `'tags'` | 你网站标签列表页面的 URL 路由。它会前置到 `routeBasePath`。 |
| `include` | `string[]` | `['**/*.{md,mdx}']` | 匹配要构建的 Markdown 文件的 glob 模式数组，相对于内容路径。 |
| `exclude` | `string[]` | _参见示例配置_ | 匹配要排除的 Markdown 文件的 glob 模式数组。用作基于 `include` 选项的细化。 |
| `sidebarPath` | <code>false \| string</code> | `undefined` | 一个侧边栏配置文件的路径，在 Node.js 上下文中加载。使用 `false` 禁用侧边栏，或使用 `undefined` 创建一个完全自动生成的侧边栏。 |
| `sidebarCollapsible` | `boolean` | `true` | 侧边栏类别是否默认可折叠。另请参阅[可折叠类别](/docs/sidebar/items#collapsible-categories) |
| `sidebarCollapsed` | `boolean` | `true` | 侧边栏类别是否默认折叠。另请参阅[默认展开类别](/docs/sidebar/items#expanded-categories-by-default) |
| `sidebarItemsGenerator` | <code>[SidebarGenerator](#SidebarGenerator)</code> | _省略_ | 用于将类型为 `'autogenerated'` 的侧边栏项目替换为真实侧边栏项目（文档、类别、链接...）的函数。另请参阅[自定义侧边栏项目生成器](/docs/sidebar/autogenerated#customize-the-sidebar-items-generator) |
| `numberPrefixParser` | <code>boolean \| [PrefixParser](#PrefixParser)</code> | _省略_ | 用于从文件名中提取数字前缀的自定义解析逻辑。使用 `false` 禁用此行为并保持文档不变，使用 `true` 使用默认解析器。另请参阅[使用数字前缀](/docs/sidebar/autogenerated#using-number-prefixes) |
| `docsRootComponent` | `string` | `'@theme/DocsRoot'` | 所有文档插件页面（包括所有版本）的父组件。在文档页面和版本之间导航时保持挂载。 |
| `docVersionRootComponent` | `string` | `'@theme/DocVersionLayout'` | 单个版本的所有文档页面（带侧边栏的文档页面、标签页面）的父组件。在该特定版本的页面之间导航时保持挂载。 |
| `docRootComponent` | `string` | `'@theme/DocRoot'` | 所有带侧边栏的文档页面（常规文档页面、类别生成的索引页面）的父组件。在此类页面之间导航时保持挂载。 |
| `docItemComponent` | `string` | `'@theme/DocItem'` | 主文档容器，包含目录、分页等。 |
| `docTagsListComponent` | `string` | `'@theme/DocTagsListPage'` | 标签列表页面的根组件 |
| `docTagDocListComponent` | `string` | `'@theme/DocTagDocListPage'` | “包含标签 X 的文档”页面的根组件。 |
| `docCategoryGeneratedIndexComponent` | `string` | `'@theme/DocCategoryGeneratedIndexPage'` | 生成的类别索引页面的根组件。 |
| `remarkPlugins` | `any[]` | `[]` | 传递给 MDX 的 Remark 插件。 |
| `rehypePlugins` | `any[]` | `[]` | 传递给 MDX 的 Rehype 插件。 |
| `recmaPlugins` | `any[]` | `[]` | 传递给 MDX 的 Recma 插件。 |
| `beforeDefaultRemarkPlugins` | `any[]` | `[]` | 在默认 Docusaurus Remark 插件之前传递给 MDX 的自定义 Remark 插件。 |
| `beforeDefaultRehypePlugins` | `any[]` | `[]` | 在默认 Docusaurus Rehype 插件之前传递给 MDX 的自定义 Rehype 插件。 |
| `showLastUpdateAuthor` | `boolean` | `false` | 是否显示最后更新文档的作者。 |
| `showLastUpdateTime` | `boolean` | `false` | 是否显示文档的最后更新日期。这需要在构建期间访问 git 历史记录，因此在浅克隆（CI 系统的常见默认设置）中将无法正常工作。对于 GitHub `actions/checkout`，请使用 `fetch-depth: 0`。 |
| `breadcrumbs` | `boolean` | `true` | 在文档页面上启用或禁用面包屑导航。 |
| `disableVersioning` | `boolean` | `false` | 即使存在多个版本，也明确禁用版本控制。这将使网站仅包含当前版本。如果 `includeCurrentVersion: false` 且 `disableVersioning: true`，则会出错。 |
| `includeCurrentVersion` | `boolean` | `true` | 包括你的文档的当前版本。 |
| `lastVersion` | `string` | `versions.json` 中的第一个版本 | 优先导航到并默认显示的文档导航栏项目版本。 |
| `onlyIncludeVersions` | `string[]` | 所有可用版本 | 仅包括所有可用版本的一个子集。 |
| `versions` | <code>[VersionsConfig](#VersionsConfig)</code> | `{}` | 每个版本属性的独立自定义。 |
| `tags` | `string \| false \| null \| undefined` | `tags.yml` | 指向列出预定义标签的 YAML 文件的路径。相对于文档版本内容目录。 |
| `onInlineTags` | `'ignore' \| 'log' \| 'warn' \| 'throw'` | `warn` | 当文档包含内联标签（未出现在预定义标签列表，通常是 `docs/tags.yml` 中）时插件的行为。 |

```mdx-code-block
</APITable>
```

### 类型 {#types}

#### `EditUrlFunction` {#EditUrlFunction}

```ts
type EditUrlFunction = (params: {
  version: string;
  versionDocsDirPath: string;
  docPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

#### `PrefixParser` {#PrefixParser}

```ts
type PrefixParser = (filename: string) => {
  filename: string;
  numberPrefix?: number;
};
```

#### `SidebarGenerator` {#SidebarGenerator}

```ts
type SidebarGenerator = (generatorArgs: {
  /** 要转换的类型为 "autogenerated" 的侧边栏项目。 */
  item: {type: 'autogenerated'; dirName: string};
  /** 此侧边栏所属版本的有用元数据。 */
  version: {contentPath: string; versionName: string};
  /** 该版本的所有文档（未过滤）。 */
  docs: {
    id: string;
    title: string;
    frontMatter: DocFrontMatter & Record<string, unknown>;
    source: string;
    sourceDirName: string;
    sidebarPosition?: number | undefined;
  }[];
  /** 为此插件配置的数字前缀解析器。 */
  numberPrefixParser: PrefixParser;
  /** 你可以覆盖的默认类别索引匹配器。 */
  isCategoryIndex: CategoryIndexMatcher;
  /**
   * 键是相对于文档内容目录的路径，值是类别元数据文件的内容。
   */
  categoriesMetadata: {[filePath: string]: CategoryMetadata};
  /**
   * 用于重用/增强 Docusaurus 的默认侧边栏生成逻辑。
   */
  defaultSidebarItemsGenerator: SidebarGenerator;
  // 返回一个侧边栏项目数组 — 与你在 sidebars.js 中声明的相同，但速记除外。
  // 参见 https://docusaurus.io/docs/sidebar/items
}) => Promise<SidebarItem[]>;

type CategoryIndexMatcher = (param: {
  /** 文件名，不含扩展名 */
  fileName: string;
  /**
   * 目录列表，从最低级到最高级。
   * 如果没有目录名，则 directories 为 ['.']
   */
  directories: string[];
  /** 扩展名，带前导点 */
  extension: string;
}) => boolean;
```

#### `VersionsConfig` {#VersionsConfig}

```ts
type VersionConfig = {
  /**
   * 版本的基础路径，将附加到 `baseUrl` + `routeBasePath`。
   */
  path?: string;
  /** 用于徽章、下拉菜单等的版本标签。 */
  label?: string;
  /** 在该版本文档顶部显示的横幅。 */
  banner?: 'none' | 'unreleased' | 'unmaintained';
  /** 在每个文档顶部显示带有版本标签的徽章。 */
  badge?: boolean;
  /** 阻止搜索引擎索引此版本 */
  noIndex?: boolean;
  /** 为每个文档的 <html> 元素添加一个自定义类名 */
  className?: string;
};

type VersionsConfig = {[versionName: string]: VersionConfig};
```

### 示例配置 {#ex-config}

你可以通过预设选项或插件选项来配置此插件。

:::tip

大多数 Docusaurus 用户通过预设选项配置此插件。

:::

```js config-tabs
// 预设选项：docs
// 插件选项：@docusaurus/plugin-content-docs

const config = {
  path: 'docs',
  breadcrumbs: true,
  // 简单用例：字符串 editUrl
  // editUrl: 'https://github.com/facebook/docusaurus/edit/main/website/',
  // 高级用例：函数式 editUrl
  editUrl: ({versionDocsDirPath, docPath}) =>
    `https://github.com/facebook/docusaurus/edit/main/website/${versionDocsDirPath}/${docPath}`,
  editLocalizedFiles: false,
  editCurrentVersion: false,
  routeBasePath: 'docs',
  include: ['**/*.md', '**/*.mdx'],
  exclude: [
    '**/_*.{js,jsx,ts,tsx,md,mdx}',
    '**/_*/**',
    '**/*.test.{js,jsx,ts,tsx}',
    '**/__tests__/**',
  ],
  sidebarPath: 'sidebars.js',
  async sidebarItemsGenerator({
    defaultSidebarItemsGenerator,
    numberPrefixParser,
    item,
    version,
    docs,
    isCategoryIndex,
  }) {
    // 使用提供的数据生成自定义侧边栏切片
    return [
      {type: 'doc', id: 'intro'},
      {
        type: 'category',
        label: 'Tutorials',
        items: [
          {type: 'doc', id: 'tutorial1'},
          {type: 'doc', id: 'tutorial2'},
        ],
      },
    ];
  },
  numberPrefixParser(filename) {
    // 实现你自己的逻辑来提取潜在的数字前缀
    const numberPrefix = findNumberPrefix(filename);
    // 找到前缀：将其与清理后的文件名一起返回
    if (numberPrefix) {
      return {
        numberPrefix,
        filename: filename.replace(prefix, ''),
      };
    }
    // 未找到数字前缀
    return {numberPrefix: undefined, filename};
  },
  docsRootComponent: '@theme/DocsRoot',
  docVersionRootComponent: '@theme/DocVersionRoot',
  docRootComponent: '@theme/DocRoot',
  docItemComponent: '@theme/DocItem',
  remarkPlugins: [require('./my-remark-plugin')],
  rehypePlugins: [],
  beforeDefaultRemarkPlugins: [],
  beforeDefaultRehypePlugins: [],
  showLastUpdateAuthor: false,
  showLastUpdateTime: false,
  disableVersioning: false,
  includeCurrentVersion: true,
  lastVersion: undefined,
  versions: {
    current: {
      label: 'Android SDK v2.0.0 (WIP)',
      path: 'android-2.0.0',
      banner: 'none',
    },
    '1.0.0': {
      label: 'Android SDK v1.0.0',
      path: 'android-1.0.0',
      banner: 'unmaintained',
    },
  },
  onlyIncludeVersions: ['current', '1.0.0', '2.0.0'],
};
```

## Markdown front matter {#markdown-front-matter}

Markdown 文档可以使用以下 Markdown [front matter](../../guides/markdown-features/markdown-features-intro.mdx#front-matter) 元数据字段，两侧用一行 `---` 包围。

接受的字段：

```mdx-code-block
<APITable>
```

| 名称 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `id` | `string` | 文件路径（包括文件夹，不含扩展名） | 唯一的文档 ID。 |
| `title` | `string` | Markdown 标题或 `id` | 你的文本文档标题。用于页面元数据，并在多个地方（侧边栏、下一个/上一个按钮...）用作后备值。如果你的文档不包含任何 Markdown 标题，则会自动添加到文档顶部。 |
| `pagination_label` | `string` | `sidebar_label` 或 `title` | 用于此文档的下一个/上一个分页按钮中的文本。 |
| `sidebar_label` | `string` | `title` | 此文档在文档侧边栏中显示的文本。 |
| `sidebar_position` | `number` | 默认排序 | 在使用 `autogenerated` 侧边栏项目时，控制文档在生成的侧边栏切片中的位置。另请参阅[自动生成的侧边栏元数据](/docs/sidebar/autogenerated#autogenerated-sidebar-metadata)。 |
| `sidebar_class_name` | `string` | `undefined` | 在使用自动生成的侧边栏时，为相应的侧边栏标签提供一个特殊的类名。 |
| `sidebar_custom_props` | `object` | `undefined` | 向引用此文档的侧边栏项目分配[自定义 props](../../guides/docs/sidebar/index.mdx#passing-custom-props) |
| `displayed_sidebar` | `string` | `undefined` | 在浏览当前文档时强制显示给定的侧边栏。有关详细信息，请阅读[多个侧边栏指南](../../guides/docs/sidebar/multiple-sidebars.mdx)。 |
| `hide_title` | `boolean` | `false` | 是否隐藏文档顶部的标题。它只隐藏通过 front matter 声明的标题，对文档顶部的 Markdown 标题没有影响。 |
| `hide_table_of_contents` | `boolean` | `false` | 是否隐藏右侧的目录。 |
| `toc_min_heading_level` | `number` | `2` | 目录中显示的最低标题级别。必须在 2 到 6 之间，且小于或等于最大值。 |
| `toc_max_heading_level` | `number` | `3` | 目录中显示的最高标题级别。必须在 2 到 6 之间。 |
| `pagination_next` | <code>string \| null</code> | 侧边栏中的下一个文档 | 你希望“下一个”分页链接到的文档的 ID。使用 `null` 禁用此页面的“下一个”显示。 |
| `pagination_prev` | <code>string \| null</code> | 侧边栏中的上一个文档 | 你希望“上一个”分页链接到的文档的 ID。使用 `null` 禁用此页面的“上一个”显示。 |
| `parse_number_prefixes` | `boolean` | `numberPrefixParser` 插件选项 | 是否在此文档上禁用数字前缀解析。另请参阅[使用数字前缀](/docs/sidebar/autogenerated#using-number-prefixes)。 |
| `custom_edit_url` | <code>string \| null</code> | 使用 `editUrl` 插件选项计算得出 | 用于编辑此文档的 URL。使用 `null` 禁用此页面的“编辑此页”显示。 |
| `keywords` | `string[]` | `undefined` | 文档页面的关键字元标签，供搜索引擎使用。 |
| `description` | `string` | Markdown 内容的第一行 | 你的文档描述，将成为 `<head>` 中的 `<meta name="description" content="..."/>` 和 `<meta property="og:description" content="..."/>`，供搜索引擎使用。 |
| `image` | `string` | `undefined` | 封面或缩略图，将用作 `<head>` 中的 `<meta property="og:image" content="..."/>`，以增强社交媒体和消息传递平台上的链接预览。 |
| `slug` | `string` | 文件路径 | 允许自定义文档 URL (`/<routeBasePath>/<slug>`)。支持多种模式：`slug: my-doc`、`slug: /my/path/myDoc`、`slug: /`。 |
| `tags` | `Tag[]` | `undefined` | 一个字符串或包含两个字符串字段 `label` 和 `permalink` 的对象的列表，用于标记你的文档。字符串可以是[标签文件](#tags-file)（通常是 `tags.yml`）中键的引用。 |
| `draft` | `boolean` | `false` | 草稿文档仅在开发期间可用。 |
| `unlisted` | `boolean` | `false` | 未列出的文档在开发和生产中都可用。它们在生产中将被“隐藏”，不被索引，从站点地图中排除，并且只能通过直接链接访问。 |
| `last_update` | `FrontMatterLastUpdate` | `undefined` | 允许覆盖最后更新的作者/日期。日期可以是任何[可解析的日期字符串](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)。 |

```mdx-code-block
</APITable>
```

```ts
type FrontMatterLastUpdate = {date?: string; author?: string};

type Tag = string | {label: string; permalink: string};
```

示例：

```md
---
id: doc-markdown
title: Docs Markdown Features
hide_title: false
hide_table_of_contents: false
sidebar_label: Markdown
sidebar_position: 3
pagination_label: Markdown features
custom_edit_url: https://github.com/facebook/docusaurus/edit/main/docs/api-doc-markdown.md
description: How do I find you when I cannot solve this problem
keywords:
  - docs
  - docusaurus
tags: [docusaurus]
image: https://i.imgur.com/mErPwqL.png
slug: /myDoc
last_update:
  date: 1/1/2000
  author: custom author name
---

# Markdown Features

My Document Markdown content
```

import TagsFileApiRefSection from './_partial-tags-file-api-ref-section.mdx';

<TagsFileApiRefSection />

## i18n {#i18n}

首先阅读 [i18n 介绍](../../i18n/i18n-introduction.mdx)。

### 翻译文件位置 {#translation-files-location}

- **基础路径**：`website/i18n/[locale]/docusaurus-plugin-content-docs`
- **多实例路径**：`website/i18n/[locale]/docusaurus-plugin-content-docs-[pluginId]`
- **JSON 文件**：使用 [`docusaurus write-translations`](../../cli.mdx#docusaurus-write-translations-sitedir) 提取
- **Markdown 文件**：`website/i18n/[locale]/docusaurus-plugin-content-docs/[versionName]`

### 文件系统结构示例 {#example-file-system-structure}

```bash
website/i18n/[locale]/docusaurus-plugin-content-docs
│
│ # website/docs 的翻译
├── current
│   ├── api
│   │   └── config.md
│   └── getting-started.md
├── current.json
│
│ # website/versioned_docs/version-1.0.0 的翻译
├── version-1.0.0
│   ├── api
│   │   └── config.md
│   └── getting-started.md
└── version-1.0.0.json
```
