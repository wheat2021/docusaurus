---
sidebar_position: 8
slug: /api/plugins/@docusaurus/plugin-ideal-image
---

# ğŸ“¦ plugin-ideal-image

import APITable from '@site/src/components/APITable';

Docusaurus æ’ä»¶ï¼Œç”¨äºç”Ÿæˆè¿‘ä¹ç†æƒ³çš„å›¾ç‰‡ï¼ˆå“åº”å¼ã€æ‡’åŠ è½½ã€ä½è´¨é‡å ä½ç¬¦ï¼‰ã€‚

:::info

é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ’ä»¶åœ¨**å¼€å‘ç¯å¢ƒä¸­å¤„äºéæ´»åŠ¨çŠ¶æ€**ï¼Œå› æ­¤ä½ å§‹ç»ˆå¯ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾ç‰‡ã€‚å¦‚æœä½ æƒ³è°ƒè¯•ç†æƒ³å›¾ç‰‡çš„è¡Œä¸ºï¼Œå¯ä»¥å°† [`disableInDev`](#disableInDev) é€‰é¡¹è®¾ç½®ä¸º `false`ã€‚

:::

## å®‰è£… {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-ideal-image
```

## ç”¨æ³• {#usage}

æ­¤æ’ä»¶ä»…æ”¯æŒ PNG å’Œ JPG æ ¼å¼ã€‚

```jsx
import Image from '@theme/IdealImage';
import thumbnail from './path/to/img.png';

// ä½ çš„ React ä»£ç 
<Image img={thumbnail} />

// æˆ–
<Image img={require('./path/to/img.png')} />
```

:::warning

æ­¤æ’ä»¶æ³¨å†Œäº†ä¸€ä¸ª [Webpack loader](https://webpack.js.org/loaders/)ï¼Œå®ƒä¼šæ”¹å˜å¯¼å…¥/require çš„å›¾ç‰‡ç±»å‹ï¼š

- ä¹‹å‰ï¼š`string`
- ä¹‹åï¼š`{preSrc: string, src: import("@theme/IdealImage").SrcImage}`

:::

:::warning è‡´ pnpm ç”¨æˆ·

ä» [pnpm 10](https://github.com/pnpm/pnpm/releases/tag/v10.0.0) å¼€å§‹ï¼Œè¿è¡Œ `pnpm install` é»˜è®¤ä¸ä¼šè¿è¡Œä¾èµ–é¡¹çš„å®‰è£…è„šæœ¬ã€‚ä½ éœ€è¦ä¸ºæˆ‘ä»¬çš„ `sharp` å›¾ç‰‡è°ƒæ•´ä¾èµ–é¡¹è¿›è¡Œé¢å¤–çš„ pnpm é…ç½®ï¼ˆ[issue](https://github.com/lovell/sharp/issues/4343)ï¼‰ï¼Œä»¥ä¾¿å…¶æ­£ç¡®å®‰è£…ï¼Œä¾‹å¦‚ï¼š

```json title="package.json"
{
  "pnpm": {
    "onlyBuiltDependencies": ["fsevents"]
  }
}
```

:::

## é…ç½® {#configuration}

æ¥å—çš„å­—æ®µï¼š

```mdx-code-block
<APITable>
```

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| --- | --- | --- | --- |
| `name` | `string` | `ideal-img/[name].[hash:hex:7].[width].[ext]` | è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åæ¨¡æ¿ã€‚ |
| `sizes` | `number[]` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„æ‰€æœ‰å®½åº¦ã€‚å¦‚æœæŒ‡å®šå°ºå¯¸è¶…è¿‡åŸå§‹å›¾ç‰‡å®½åº¦ï¼Œå°†ä½¿ç”¨åè€…ï¼ˆå³å›¾ç‰‡ä¸ä¼šè¢«æ”¾å¤§ï¼‰ã€‚ |
| `size` | `number` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„ä¸€ä¸ªå®½åº¦ï¼›å¦‚æœæŒ‡å®šå°ºå¯¸è¶…è¿‡åŸå§‹å›¾ç‰‡å®½åº¦ï¼Œå°†ä½¿ç”¨åè€…ï¼ˆå³å›¾ç‰‡ä¸ä¼šè¢«æ”¾å¤§ï¼‰ |
| `min` | `number` | | ä½œä¸ºæ‰‹åŠ¨æŒ‡å®š `sizes` çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯ä»¥æŒ‡å®š `min`ã€`max` å’Œ `steps`ï¼Œå°ºå¯¸å°†ä¸ºä½ è‡ªåŠ¨ç”Ÿæˆã€‚ |
| `max` | `number` | | è§ä¸Šé¢çš„ `min` |
| `steps` | `number` | `4` | é…ç½®åœ¨ `min` å’Œ `max` ä¹‹é—´ï¼ˆå«ï¼‰ç”Ÿæˆçš„å›¾ç‰‡æ•°é‡ |
| `quality` | `number` | `85` | JPEG å‹ç¼©è´¨é‡ |
| `disableInDev` | `boolean` | `true` | ä½ å¯ä»¥é€šè¿‡å°†æ­¤é¡¹è®¾ç½®ä¸º `false` æ¥åœ¨å¼€å‘æ¨¡å¼ä¸‹æµ‹è¯•ç†æƒ³å›¾ç‰‡çš„è¡Œä¸ºã€‚**æç¤º**ï¼šåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨[ç½‘ç»œèŠ‚æµ](https://www.browserstack.com/guide/how-to-perform-network-throttling-in-chrome)æ¥æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ |

```mdx-code-block
</APITable>
```

### é…ç½®ç¤ºä¾‹ {#ex-config}

è¿™æ˜¯ä¸€ä¸ªé…ç½®ç¤ºä¾‹ï¼š

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-ideal-image',
      // highlight-start
      {
        quality: 70,
        max: 1030, // è°ƒæ•´åå›¾ç‰‡çš„æœ€å¤§å°ºå¯¸ã€‚
        min: 640, // è°ƒæ•´åå›¾ç‰‡çš„æœ€å°å°ºå¯¸ã€‚å¦‚æœåŸå§‹å°ºå¯¸æ›´å°ï¼Œåˆ™ä½¿ç”¨åŸå§‹å°ºå¯¸ã€‚
        steps: 2, // åœ¨ min å’Œ maxï¼ˆå«ï¼‰ä¹‹é—´ç”Ÿæˆçš„æœ€å¤§å›¾ç‰‡æ•°é‡
        disableInDev: false,
      },
      // highlight-end
    ],
  ],
};
```
