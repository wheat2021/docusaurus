---
title: plugin-content-blog
sidebar_label: plugin-content-blog
sidebar_position: 2
slug: /api/plugins/@docusaurus/plugin-content-blog
---

# 📦 plugin-content-blog

import APITable from '@site/src/components/APITable';

提供[博客](blog.mdx)功能，是 Docusaurus 的默认博客插件。

:::warning 某些功能仅限生产环境

[Feed 功能](../../blog.mdx#feed)通过提取构建输出来工作，**仅在生产环境中活动**。

:::

## 安装 {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-content-blog
```

:::tip

如果你使用预设 `@docusaurus/preset-classic`，则无需将此插件作为依赖项安装。

你可以通过[预设选项](../../using-plugins.mdx#docusauruspreset-classic)配置此插件。

:::

## 配置 {#configuration}

接受的字段：

```mdx-code-block
<APITable>
```

| 名称 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `path` | `string` | `'blog'` | 文件系统上博客内容目录的路径，相对于站点目录。 |
| `editUrl` | <code>string \| [EditUrlFn](#EditUrlFn)</code> | `undefined` | 用于编辑你网站的基础 URL。最终 URL 由 `editUrl + relativePostPath` 计算得出。使用函数可以对每个文件进行更细致的控制。完全省略此变量将禁用编辑链接。 |
| `editLocalizedFiles` | `boolean` | `false` | 编辑 URL 将指向本地化文件，而不是原始的未本地化文件。当 `editUrl` 是一个函数时，此选项将被忽略。 |
| `blogTitle` | `string` | `'Blog'` | 博客页面标题，用于更好的 SEO。 |
| `blogDescription` | `string` | `'Blog'` | 博客页面元描述，用于更好的 SEO。 |
| `blogSidebarCount` | <code>number \| 'ALL'</code> | `5` | 在博客侧边栏中显示的博客文章元素数量。`'ALL'` 表示显示所有博客文章；`0` 表示禁用。 |
| `blogSidebarTitle` | `string` | `'Recent posts'` | 博客侧边栏的标题。 |
| `routeBasePath` | `string` | `'blog'` | 你网站博客部分的 URL 路由。**不要**包含尾部斜杠。使用 `/` 将博客置于根路径。 |
| `tagsBasePath` | `string` | `'tags'` | 你博客标签部分的 URL 路由。将附加到 `routeBasePath`。 |
| `pageBasePath` | `string` | `'page'` | 你博客页面部分的 URL 路由。将附加到 `routeBasePath`。 |
| `archiveBasePath` | <code>string \| null</code> | `'archive'` | 你博客归档部分的 URL 路由。将附加到 `routeBasePath`。**不要**包含尾部斜杠。使用 `null` 禁用归档的生成。 |
| `authorsBasePath` | `string` | `'authors'` | 你博客作者页面的 URL 路由。将附加到 `path`。 |
| `include` | `string[]` | `['**/*.{md,mdx}']` | 匹配要构建的 Markdown 文件的 glob 模式数组，相对于内容路径。 |
| `exclude` | `string[]` | _参见示例配置_ | 匹配要排除的 Markdown 文件的 glob 模式数组。用作基于 `include` 选项的细化。 |
| `postsPerPage` | <code>number \| 'ALL'</code> | `10` | 在列表页面中每页显示的帖子数量。使用 `'ALL'` 在一个列表页面上显示所有帖子。 |
| `blogListComponent` | `string` | `'@theme/BlogListPage'` | 博客列表页面的根组件。 |
| `blogPostComponent` | `string` | `'@theme/BlogPostPage'` | 每个博客文章页面的根组件。 |
| `blogTagsListComponent` | `string` | `'@theme/BlogTagsListPage'` | 标签列表页面的根组件。 |
| `blogTagsPostsComponent` | `string` | `'@theme/BlogTagsPostsPage'` | “包含标签的帖子”页面的根组件。 |
| `blogArchiveComponent` | `string` | `'@theme/BlogArchivePage'` | 博客归档页面的根组件。 |
| `blogAuthorsPostsComponent` | `string` | `'@theme/Blog/Pages/BlogAuthorsPostsPage'` | 博客作者页面的根组件。 |
| `blogAuthorsListComponent` | `string` | `'@theme/Blog/Pages/BlogAuthorsListPage'` | 博客作者页面索引的根组件。 |
| `remarkPlugins` | `any[]` | `[]` | 传递给 MDX 的 Remark 插件。 |
| `rehypePlugins` | `any[]` | `[]` | 传递给 MDX 的 Rehype 插件。 |
| `recmaPlugins` | `any[]` | `[]` | 传递给 MDX 的 Recma 插件。 |
| `beforeDefaultRemarkPlugins` | `any[]` | `[]` | 在默认 Docusaurus Remark 插件之前传递给 MDX 的自定义 Remark 插件。 |
| `beforeDefaultRehypePlugins` | `any[]` | `[]` | 在默认 Docusaurus Rehype 插件之前传递给 MDX 的自定义 Rehype 插件。 |
| `truncateMarker` | `RegExp` | `/<!--\s*truncate\s*-->/` \| `\{\/\*\s*truncate\s*\*\/\}/` | 标记摘要结束位置的截断标记。 |
| `showReadingTime` | `boolean` | `true` | 显示博客文章的预计阅读时间。 |
| `readingTime` | `ReadingTimeFn` | 默认阅读时间 | 一个用于自定义显示的阅读时间数字的回调。 |
| `authorsMapPath` | `string` | `'authors.yml'` | 作者映射文件的路径，相对于博客内容目录。 |
| `feedOptions` | _见下文_ | `{type: ['rss', 'atom']}` | 博客 feed。 |
| `feedOptions.type` | <code>[FeedType](#FeedType) \| [FeedType](#FeedType)[] \| 'all' \| null</code> | **必填** | 要生成的 feed 类型。使用 `null` 禁用生成。 |
| `feedOptions.createFeedItems` | <code>[CreateFeedItemsFn](#CreateFeedItemsFn) \| undefined</code> | `undefined` | 一个可选函数，可用于转换和/或过滤 feed 中的项目。 |
| `feedOptions.limit` | `number \| null \| false` | `20` | 将 feed 限制为指定数量的帖子，`false` 或 `null` 表示所有条目。默认为 `20`。 |
| `feedOptions.title` | `string` | `siteConfig.title` | Feed 的标题。 |
| `feedOptions.description` | `string` | <code>\`$\{siteConfig.title} Blog\`</code> | Feed 的描述。 |
| `feedOptions.copyright` | `string` | `undefined` | 版权信息。 |
| `feedOptions.xslt` | <code>boolean \| [FeedXSLTOptions](#FeedXSLTOptions)</code> | `undefined` | 允许使用 XSLT 对博客 XML feed 进行样式设置，以便浏览器能很好地渲染它们。 |
| `feedOptions.language` | `string` (参见[文档](http://www.w3.org/TR/REC-html40/struct/dirlang.html#langcodes)以获取可能的值) | `undefined` | Feed 的语言元数据。 |
| `sortPosts` | <code>'descending' \| 'ascending' </code> | `'descending'` | 控制博客文章排序的方向。 |
| `processBlogPosts` | <code>[ProcessBlogPostsFn](#ProcessBlogPostsFn)</code> | `undefined` | 一个可选函数，可用于转换博客文章（过滤、修改、删除等）。 |
| `showLastUpdateAuthor` | `boolean` | `false` | 是否显示最后更新博客文章的作者。 |
| `showLastUpdateTime` | `boolean` | `false` | 是否显示博客文章的最后更新日期。这需要在构建期间访问 git 历史记录，因此在浅克隆（CI 系统的常见默认设置）中将无法正常工作。对于 GitHub `actions/checkout`，请使用`fetch-depth: 0`。 |
| `tags` | `string \| false \| null \| undefined` | `tags.yml` | 指向列出预定义标签的 YAML 标签文件的路径。相对于博客内容目录。 |
| `onInlineTags` | `'ignore' \| 'log' \| 'warn' \| 'throw'` | `warn` | 当博客文章包含内联标签（未出现在预定义标签列表，通常是 `tags.yml` 中）时插件的行为。 |
| `onUntruncatedBlogPosts` | `'ignore' \| 'log' \| 'warn' \| 'throw'` | `warn` | 当博客文章不包含截断标记时插件的行为。 |

```mdx-code-block
</APITable>
```

### 类型 {#types}

#### `EditUrlFn` {#EditUrlFn}

```ts
type EditUrlFunction = (params: {
  blogDirPath: string;
  blogPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

#### `ReadingTimeFn` {#ReadingTimeFn}

```ts
type ReadingTimeOptions = {
  wordsPerMinute: number;
};

type ReadingTimeCalculator = (params: {
  content: string;
  locale: string;
  frontMatter?: BlogPostFrontMatter & Record<string, unknown>;
  options?: ReadingTimeOptions;
}) => number;

type ReadingTimeFn = (params: {
  content: string;
  locale: string;
  frontMatter: BlogPostFrontMatter & Record<string, unknown>;
  defaultReadingTime: ReadingTimeCalculator;
}) => number | undefined;
```

#### `FeedType` {#FeedType}

```ts
type FeedType = 'rss' | 'atom' | 'json';
```

#### `FeedXSLTOptions` {#FeedXSLTOptions}

允许使用 [XSLT](https://developer.mozilla.org/en-US/docs/Web/XSLT) 对博客 XML feed 进行样式设置，以便浏览器能很好地渲染它们。

- 使用 `true` 让博客使用其内置的 `.xsl` 和 `.css` 文件来设置博客 feed 的样式
- 使用假值（`undefined | null | false`）禁用该功能
- 使用 `string` 提供一个相对于博客内容文件夹的自定义 `.xsl` 文件的文件路径。按照惯例，你必须提供一个同名的 `.css` 文件。

```ts
type FeedXSLTOptions =
  | boolean
  | undefined
  | null
  | {
      rss?: string | boolean | null | undefined;
      atom?: string | boolean | null | undefined;
    };
```

#### `CreateFeedItemsFn` {#CreateFeedItemsFn}

```ts
type CreateFeedItemsFn = (params: {
  blogPosts: BlogPost[];
  siteConfig: DocusaurusConfig;
  outDir: string;
  defaultCreateFeedItemsFn: CreateFeedItemsFn;
}) => Promise<BlogFeedItem[]>;
```

#### `ProcessBlogPostsFn` {#ProcessBlogPostsFn}

```ts
type ProcessBlogPostsFn = (params: {
  blogPosts: BlogPost[];
}) => Promise<void | BlogPost[]>;
```

### 示例配置 {#ex-config}

你可以通过预设选项或插件选项来配置此插件。

:::tip

大多数 Docusaurus 用户通过预设选项配置此插件。

:::

```js config-tabs
// 预设选项：blog
// 插件选项：@docusaurus/plugin-content-blog

const config = {
  path: 'blog',
  // 简单用例：字符串 editUrl
  // editUrl: 'https://github.com/facebook/docusaurus/edit/main/website/',
  // 高级用例：函数式 editUrl
  editUrl: ({locale, blogDirPath, blogPath, permalink}) =>
    `https://github.com/facebook/docusaurus/edit/main/website/${blogDirPath}/${blogPath}`,
  editLocalizedFiles: false,
  blogTitle: 'Blog title',
  blogDescription: 'Blog',
  blogSidebarCount: 5,
  blogSidebarTitle: 'All our posts',
  routeBasePath: 'blog',
  include: ['**/*.{md,mdx}'],
  exclude: [
    '**/_*.{js,jsx,ts,tsx,md,mdx}',
    '**/_*/**',
    '**/*.test.{js,jsx,ts,tsx}',
    '**/__tests__/**',
  ],
  postsPerPage: 10,
  blogListComponent: '@theme/BlogListPage',
  blogPostComponent: '@theme/BlogPostPage',
  blogTagsListComponent: '@theme/BlogTagsListPage',
  blogTagsPostsComponent: '@theme/BlogTagsPostsPage',
  remarkPlugins: [require('./my-remark-plugin')],
  rehypePlugins: [],
  beforeDefaultRemarkPlugins: [],
  beforeDefaultRehypePlugins: [],
  truncateMarker: /<!--\s*(truncate)\s*-->/,
  showReadingTime: true,
  feedOptions: {
    type: '',
    title: '',
    description: '',
    copyright: '',
    language: undefined,
    createFeedItems: async (params) => {
      const {blogPosts, defaultCreateFeedItems, ...rest} = params;
      return defaultCreateFeedItems({
        // 只在 feed 中保留最近的 10 篇博客文章
        blogPosts: blogPosts.filter((item, index) => index < 10),
        ...rest,
      });
    },
  },
};
```

## Markdown front matter {#markdown-front-matter}

Markdown 文档可以使用以下 Markdown [front matter](../../guides/markdown-features/markdown-features-intro.mdx#front-matter) 元数据字段，两侧用一行 `---` 包围。

接受的字段：

```mdx-code-block
<APITable>
```

| 名称 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `authors` | `Authors` | `undefined` | 博客文章作者列表（或单个作者）。有关更多解释，请阅读[`作者`指南](../../blog.mdx#blog-post-authors)。即使是单作者博客文章，也应优先使用 `authors` 而不是 `author_*` front matter 字段。 |
| `author` | `string` | `undefined` | ⚠️ 优先使用 `authors`。博客文章作者的姓名。 |
| `author_url` | `string` | `undefined` | ⚠️ 优先使用 `authors`。作者姓名将链接到的 URL。这可以是 GitHub、X、Facebook 个人资料 URL 等。 |
| `author_image_url` | `string` | `undefined` | ⚠️ 优先使用 `authors`。作者缩略图的 URL。 |
| `author_title` | `string` | `undefined` | ⚠️ 优先使用 `authors`。作者的描述。 |
| `title` | `string` | Markdown 标题 | 博客文章标题。 |
| `title_meta` | `string` | `frontMatter.title` | 博客文章的 SEO 元数据标题，用于 `<head>` 中的 `<title>` 和 `og:title`。当显示的标题和 SEO 标题应不同时，允许覆盖 `title`。 |
| `sidebar_label` | `string` | `title` | 博客侧边栏的自定义标签，替换默认标签（`title`）。 |
| `date` | `string` | 文件名或文件创建时间 | 博客文章创建日期。如果未指定，可以从文件或文件夹名称中提取，例如 `2021-04-15-blog-post.mdx`、`2021-04-15-blog-post/index.mdx`、`2021/04/15/blog-post.mdx`。否则，它是 Markdown 文件的创建时间。 |
| `tags` | `Tag[]` | `undefined` | 一个字符串或包含两个字符串字段 `label` 和 `permalink` 的对象的列表，用于标记你的帖子。字符串可以是[标签文件](#tags-file)（通常是 `tags.yml`）中键的引用。 |
| `draft` | `boolean` | `false` | 草稿博客文章仅在开发期间可用。 |
| `unlisted` | `boolean` | `false` | 未列出的博客文章在开发和生产中都可用。它们在生产中将被“隐藏”，不被索引，从站点地图中排除，并且只能通过直接链接访问。 |
| `hide_table_of_contents` | `boolean` | `false` | 是否隐藏右侧的目录。 |
| `toc_min_heading_level` | `number` | `2` | 目录中显示的最低标题级别。必须在 2 到 6 之间，且小于或等于最大值。 |
| `toc_max_heading_level` | `number` | `3` | 目录中显示的最高标题级别。必须在 2 到 6 之间。 |
| `keywords` | `string[]` | `undefined` | 关键字元标签，将成为 `<head>` 中的 `<meta name="keywords" content="keyword1,keyword2,..."/>`，供搜索引擎使用。 |
| `description` | `string` | Markdown 内容的第一行 | 你的文档描述，将成为 `<head>` 中的 `<meta name="description" content="..."/>` 和 `<meta property="og:description" content="..."/>`，供搜索引擎使用。 |
| `image` | `string` | `undefined` | 封面或缩略图，将用作 `<head>` 中的 `<meta property="og:image" content="..."/>`，以增强社交媒体和消息传递平台上的链接预览。 |
| `slug` | `string` | 文件路径 | 允许自定义博客文章 URL (`/<routeBasePath>/<slug>`)。支持多种模式：`slug: my-blog-post`、`slug: /my/path/to/blog/post`、`slug: /`。 |
| `last_update` | `FrontMatterLastUpdate` | `undefined` | 允许覆盖最后更新的作者/日期。日期可以是任何[可解析的日期字符串](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)。 |

```mdx-code-block
</APITable>
```

```ts
type FrontMatterLastUpdate = {date?: string; author?: string};

type Tag = string | {label: string; permalink: string};

// 作者键引用全局插件 authors.yml 文件中的作者
type AuthorKey = string;

// 社交平台名称 -> 社交平台链接
// 示例：{MyPlatform: 'https://myplatform.com/myusername'}
// 预定义平台
// ("x", "github", "twitter", "linkedin", "stackoverflow", "instagram", "bluesky", "mastodon", "threads", "twitch", "youtube") 接受句柄：
// 示例：{github: 'slorber'}
type AuthorSocials = Record<string, string>;

type Author = {
  key?: AuthorKey;
  name: string;
  title?: string;
  url?: string;
  image_url?: string;
  socials?: AuthorSocials;
};

// front matter 的 authors 字段允许各种可能的形状
type Authors = AuthorKey | Author | (AuthorKey | Author)[];
```

示例：

```md
---
title: Welcome Docusaurus
authors:
  - slorber
  - yangshun
  - name: Joel Marcey
    title: Co-creator of Docusaurus 1
    url: https://github.com/JoelMarcey
    image_url: https://github.com/JoelMarcey.png
    socials:
      x: joelmarcey
      github: JoelMarcey
tags: [docusaurus]
description: This is my first post on Docusaurus.
image: https://i.imgur.com/mErPwqL.png
hide_table_of_contents: false
---

一篇 Markdown 博客文章
```

import TagsFileApiRefSection from './_partial-tags-file-api-ref-section.mdx';

<TagsFileApiRefSection />

## 作者文件 {#authors-file}

使用 [`authors` 插件选项](#authors) 来配置 YAML 作者文件的路径。

按照惯例，插件将在你的博客内容文件夹的根目录中查找 `authors.yml` 文件。

此文件可以包含预定义的[全局博客作者](../../blog.mdx#global-authors)列表。你可以通过 [`authors` front matter](#markdown-front-matter) 在 Markdown 文件中按键引用这些作者。

### 类型 {#authors-file-types}

提供的作者文件的 YAML 内容应遵循以下形状：

```tsx
type AuthorsMapInput = {
  [authorKey: string]: AuthorInput;
};

type AuthorInput = {
  name?: string;
  title?: string;
  description?: string;
  imageURL?: string;
  url?: string;
  email?: string;
  page?: boolean | {permalink: string};
  socials?: Record<string, string>;
  [customAuthorAttribute: string]: unknown;
};
```

### 示例 {#authors-file-example}

```yml title="tags.yml"
slorber:
  name: Sébastien Lorber
  title: Docusaurus maintainer
  url: https://sebastienlorber.com
  image_url: https://github.com/slorber.png
  page: true
  socials:
    x: sebastienlorber
    github: slorber

jmarcey:
  name: Joel Marcey
  title: Co-creator of Docusaurus 1
  url: https://github.com/JoelMarcey
  image_url: https://github.com/JoelMarcey.png
  email: jimarcey@gmail.com
  page:
    permalink: '/joel-marcey'
  socials:
    x: joelmarcey
    github: JoelMarcey
```

```md title="blog/my-blog-post.md"
---
authors: [slorber, jmarcey]
---

# My Blog Post

Content
```

## i18n {#i18n}

首先阅读 [i18n 介绍](../../i18n/i18n-introduction.mdx)。

### 翻译文件位置 {#translation-files-location}

- **基础路径**：`website/i18n/[locale]/docusaurus-plugin-content-blog`
- **多实例路径**：`website/i18n/[locale]/docusaurus-plugin-content-blog-[pluginId]`
- **JSON 文件**：使用 [`docusaurus write-translations`](../../cli.mdx#docusaurus-write-translations-sitedir) 提取
- **Markdown 文件**：`website/i18n/[locale]/docusaurus-plugin-content-blog`

### 文件系统结构示例 {#example-file-system-structure}

```bash
website/i18n/[locale]/docusaurus-plugin-content-blog
│
│ # website/blog 的翻译
├── authors.yml
├── first-blog-post.md
├── second-blog-post.md
│
│ # 将要渲染的插件选项的翻译
└── options.json
```
