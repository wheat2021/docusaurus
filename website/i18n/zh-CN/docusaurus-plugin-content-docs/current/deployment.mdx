---
title: éƒ¨ç½²
description: åœ¨ä¸€ç³»åˆ—é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ä¸Šä¸ºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä½ çš„ Docusaurus åº”ç”¨ã€‚
---

# éƒ¨ç½²

è¦ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºä½ ç½‘ç«™çš„é™æ€æ–‡ä»¶ï¼Œè¯·è¿è¡Œï¼š

```bash npm2yarn
npm run build
```

å®Œæˆåï¼Œé™æ€æ–‡ä»¶å°†åœ¨ `build` ç›®å½•ä¸­ç”Ÿæˆã€‚

:::note

Docusaurus çš„å”¯ä¸€èŒè´£æ˜¯æ„å»ºä½ çš„ç«™ç‚¹å¹¶åœ¨ `build` ç›®å½•ä¸­è¾“å‡ºé™æ€æ–‡ä»¶ã€‚

ç°åœ¨ç”±ä½ æ¥é€‰æ‹©å¦‚ä½•æ‰˜ç®¡è¿™äº›é™æ€æ–‡ä»¶ã€‚

:::

ä½ å¯ä»¥å°†ä½ çš„ç«™ç‚¹éƒ¨ç½²åˆ°é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œä¾‹å¦‚ [Vercel](https://vercel.com/)ã€[GitHub Pages](https://pages.github.com/)ã€[Netlify](https://www.netlify.com/)ã€[Render](https://render.com/docs/static-sites) å’Œ [Surge](https://surge.sh/help/getting-started-with-surge)ã€‚

Docusaurus ç«™ç‚¹æ˜¯é™æ€æ¸²æŸ“çš„ï¼Œé€šå¸¸åœ¨æ²¡æœ‰ JavaScript çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å·¥ä½œï¼

## é…ç½® {#configuration}

ä¸ºäº†ä¼˜åŒ–è·¯ç”±å¹¶ä»æ­£ç¡®çš„ä½ç½®æä¾›æ–‡ä»¶ï¼Œ`docusaurus.config.js` ä¸­éœ€è¦ä»¥ä¸‹å‚æ•°ï¼š

| åç§° | æè¿° |
| --- | --- |
| `url` | ä½ çš„ç«™ç‚¹çš„ URLã€‚å¯¹äºéƒ¨ç½²åœ¨ `https://my-org.com/my-project/` çš„ç«™ç‚¹ï¼Œ`url` æ˜¯ `https://my-org.com/`ã€‚ |
| `baseUrl` | ä½ çš„é¡¹ç›®çš„åŸºæœ¬ URLï¼Œä»¥æ–œæ ç»“å°¾ã€‚å¯¹äºéƒ¨ç½²åœ¨ `https://my-org.com/my-project/` çš„ç«™ç‚¹ï¼Œ`baseUrl` æ˜¯ `/my-project/`ã€‚ |

## åœ¨æœ¬åœ°æµ‹è¯•ä½ çš„æ„å»º {#testing-build-locally}

åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œåœ¨æœ¬åœ°æµ‹è¯•ä½ çš„æ„å»ºéå¸¸é‡è¦ã€‚Docusaurus ä¸ºæ­¤æä¾›äº†ä¸€ä¸ª [`docusaurus serve`](cli.mdx#docusaurus-serve-sitedir) å‘½ä»¤ï¼š

```bash npm2yarn
npm run serve
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†åœ¨ [`http://localhost:3000/`](http://localhost:3000/) åŠ è½½ä½ çš„ç«™ç‚¹ã€‚

## URL æœ«å°¾æ–œæ é…ç½® {#trailing-slashes}

Docusaurus æœ‰ä¸€ä¸ª [`trailingSlash` é…ç½®](./api/docusaurus.config.js.mdx#trailingSlash)ï¼Œå…è®¸è‡ªå®šä¹‰ URL/é“¾æ¥å’Œç”Ÿæˆçš„æ–‡ä»¶åæ¨¡å¼ã€‚

é»˜è®¤å€¼é€šå¸¸å·¥ä½œå¾—å¾ˆå¥½ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ¯ä¸ªé™æ€æ‰˜ç®¡æä¾›å•†çš„**è¡Œä¸ºéƒ½ä¸åŒ**ï¼Œå°†å®Œå…¨ç›¸åŒçš„ç«™ç‚¹éƒ¨ç½²åˆ°ä¸åŒçš„ä¸»æœºä¼šå¯¼è‡´ä¸åŒçš„ç»“æœã€‚æ ¹æ®ä½ çš„ä¸»æœºï¼Œæ›´æ”¹æ­¤é…ç½®å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚

:::tip

ä½¿ç”¨ [slorber/trailing-slash-guide](https://github.com/slorber/trailing-slash-guide) æ¥æ›´å¥½åœ°äº†è§£ä½ çš„ä¸»æœºçš„è¡Œä¸ºå¹¶é€‚å½“åœ°é…ç½® `trailingSlash`ã€‚

:::

## ä½¿ç”¨ç¯å¢ƒå˜é‡ {#using-environment-variables}

å°†æ½œåœ¨çš„æ•æ„Ÿä¿¡æ¯æ”¾åœ¨ç¯å¢ƒä¸­æ˜¯å¸¸è§çš„åšæ³•ã€‚ç„¶è€Œï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„ Docusaurus ç½‘ç«™ä¸­ï¼Œ`docusaurus.config.js` æ–‡ä»¶æ˜¯ä¸ Node.js ç¯å¢ƒçš„å”¯ä¸€æ¥å£ï¼ˆè¯·å‚é˜…æˆ‘ä»¬çš„[æ¶æ„æ¦‚è¿°](advanced/architecture.mdx)ï¼‰ï¼Œè€Œå…¶ä»–æ‰€æœ‰å†…å®¹ï¼ˆMDX é¡µé¢ã€React ç»„ä»¶ç­‰ï¼‰éƒ½æ˜¯å®¢æˆ·ç«¯çš„ï¼Œæ— æ³•ç›´æ¥è®¿é—® `process` å…¨å±€å˜é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ [`customFields`](api/docusaurus.config.js.mdx#customFields) å°†ç¯å¢ƒå˜é‡ä¼ é€’ç»™å®¢æˆ·ç«¯ã€‚

```js title="docusaurus.config.js"
// å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ dotenv (https://www.npmjs.com/package/dotenv)
import 'dotenv/config';

export default {
  title: '...',
  url: process.env.URL, // ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥æ§åˆ¶ç«™ç‚¹çš„å…·ä½“ä¿¡æ¯
  // highlight-start
  customFields: {
    // åœ¨è¿™é‡Œæ”¾ç½®ä½ çš„è‡ªå®šä¹‰ç¯å¢ƒ
    teamEmail: process.env.EMAIL,
  },
  // highlight-end
};
```

```jsx title="home.jsx"
import useDocusaurusContext from '@docusaurus/useDocusaurusContext';

export default function Home() {
  const {
    siteConfig: {customFields},
  } = useDocusaurusContext();
  return <div>é€šè¿‡ {customFields.teamEmail} è”ç³»æˆ‘ä»¬ï¼</div>;
}
```

## é€‰æ‹©æ‰˜ç®¡æœåŠ¡æä¾›å•† {#choosing-a-hosting-provider}

æœ‰å‡ ç§å¸¸è§çš„æ‰˜ç®¡é€‰é¡¹ï¼š

- ä½¿ç”¨åƒ Apache2 æˆ– Nginx è¿™æ ·çš„ HTTP æœåŠ¡å™¨è¿›è¡Œ[è‡ªä¸»æ‰˜ç®¡](#self-hosting)ã€‚
- Jamstack æä¾›å•†ï¼ˆä¾‹å¦‚ [Netlify](#deploying-to-netlify) å’Œ [Vercel](#deploying-to-vercel)ï¼‰ã€‚æˆ‘ä»¬å°†ä»¥å®ƒä»¬ä¸ºå‚è€ƒï¼Œä½†åŒæ ·çš„é“ç†ä¹Ÿé€‚ç”¨äºå…¶ä»–æä¾›å•†ã€‚
- [GitHub Pages](#deploying-to-github-pages)ï¼ˆä»å®šä¹‰ä¸Šè®²ï¼Œå®ƒä¹Ÿæ˜¯ Jamstackï¼Œä½†æˆ‘ä»¬å°†å…¶åˆ†å¼€æ¯”è¾ƒï¼‰ã€‚

å¦‚æœä½ ä¸ç¡®å®šé€‰æ‹©å“ªä¸€ä¸ªï¼Œè¯·é—®è‡ªå·±ä»¥ä¸‹é—®é¢˜ï¼š

<details>

<summary>
  æˆ‘æ„¿æ„ä¸ºæ­¤æŠ•å…¥å¤šå°‘èµ„æºï¼ˆé‡‘é’±ã€äººåŠ›ç­‰ï¼‰ï¼Ÿ
</summary>

- ğŸ”´ è‡ªä¸»æ‰˜ç®¡éœ€è¦ç½‘ç»œä»¥åŠ Linux å’Œ Web æœåŠ¡å™¨ç®¡ç†çš„ç»éªŒã€‚è¿™æ˜¯æœ€å›°éš¾çš„é€‰é¡¹ï¼Œéœ€è¦æœ€å¤šçš„æ—¶é—´æ¥æˆåŠŸç®¡ç†ã€‚åœ¨è´¹ç”¨æ–¹é¢ï¼Œäº‘æœåŠ¡å‡ ä¹ä»ä¸å…è´¹ï¼Œè´­ä¹°/éƒ¨ç½²ç°åœºæœåŠ¡å™¨å¯èƒ½æˆæœ¬æ›´é«˜ã€‚
- ğŸŸ¢ Jamstack æä¾›å•†å¯ä»¥å¸®åŠ©ä½ å‡ ä¹ç«‹å³å»ºç«‹ä¸€ä¸ªå¯å·¥ä½œçš„ç½‘ç«™ï¼Œå¹¶æä¾›æ˜“äºé…ç½®çš„æœåŠ¡å™¨ç«¯é‡å®šå‘ç­‰åŠŸèƒ½ã€‚è®¸å¤šæä¾›å•†å³ä½¿æ˜¯å…è´¹è®¡åˆ’ä¹Ÿæä¾›æ…·æ…¨çš„æ„å»ºæ—¶é—´é…é¢ï¼Œä½ å‡ ä¹æ°¸è¿œä¸ä¼šè¶…å‡ºã€‚ç„¶è€Œï¼Œå…è´¹è®¡åˆ’æœ‰é™åˆ¶ï¼Œä¸€æ—¦è¾¾åˆ°è¿™äº›é™åˆ¶ï¼Œä½ å°±éœ€è¦ä»˜è´¹ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ä½ çš„æä¾›å•†çš„å®šä»·é¡µé¢ã€‚
- ğŸŸ¡ GitHub Pages çš„éƒ¨ç½²å·¥ä½œæµç¨‹è®¾ç½®èµ·æ¥å¯èƒ½å¾ˆç¹çã€‚ï¼ˆè¯æ®ï¼šå‚è§[éƒ¨ç½²åˆ° GitHub Pages](#deploying-to-github-pages)çš„ç¯‡å¹…ï¼ï¼‰ç„¶è€Œï¼Œè¿™é¡¹æœåŠ¡ï¼ˆåŒ…æ‹¬æ„å»ºå’Œéƒ¨ç½²ï¼‰å¯¹äºå…¬å…±ä»“åº“å§‹ç»ˆæ˜¯å…è´¹çš„ï¼Œæˆ‘ä»¬æœ‰è¯¦ç»†çš„è¯´æ˜æ¥å¸®åŠ©ä½ ä½¿å…¶å·¥ä½œã€‚

</details>

<details>

<summary>æˆ‘éœ€è¦å¤šå°‘æœåŠ¡å™¨ç«¯è‡ªå®šä¹‰ï¼Ÿ</summary>

- ğŸŸ¢ é€šè¿‡è‡ªä¸»æ‰˜ç®¡ï¼Œä½ å¯ä»¥è®¿é—®æ•´ä¸ªæœåŠ¡å™¨çš„é…ç½®ã€‚ä½ å¯ä»¥é…ç½®è™šæ‹Ÿä¸»æœºä»¥æ ¹æ®è¯·æ±‚ URL æä¾›ä¸åŒçš„å†…å®¹ï¼Œå¯ä»¥è¿›è¡Œå¤æ‚çš„æœåŠ¡å™¨ç«¯é‡å®šå‘ï¼Œå¯ä»¥å®ç°èº«ä»½éªŒè¯ç­‰ç­‰ã€‚å¦‚æœä½ éœ€è¦å¾ˆå¤šæœåŠ¡å™¨ç«¯åŠŸèƒ½ï¼Œè¯·è‡ªä¸»æ‰˜ç®¡ä½ çš„ç½‘ç«™ã€‚
- ğŸŸ¡ Jamstack é€šå¸¸æä¾›ä¸€äº›æœåŠ¡å™¨ç«¯é…ç½®ï¼ˆä¾‹å¦‚ URL æ ¼å¼åŒ–ï¼ˆæœ«å°¾æ–œæ ï¼‰ã€æœåŠ¡å™¨ç«¯é‡å®šå‘ç­‰ï¼‰ã€‚
- ğŸ”´ é™¤äº†å¼ºåˆ¶æ‰§è¡Œ HTTPS å’Œè®¾ç½® CNAME è®°å½•å¤–ï¼ŒGitHub Pages ä¸æš´éœ²æœåŠ¡å™¨ç«¯é…ç½®ã€‚

</details>

<details>

<summary>æˆ‘éœ€è¦åä½œå‹å¥½çš„éƒ¨ç½²å·¥ä½œæµç¨‹å—ï¼Ÿ</summary>

- ğŸŸ¡ è‡ªä¸»æ‰˜ç®¡çš„æœåŠ¡å¯ä»¥åˆ©ç”¨åƒ Netlify è¿™æ ·çš„æŒç»­éƒ¨ç½²åŠŸèƒ½ï¼Œä½†éœ€è¦æ›´å¤šçš„å·¥ä½œã€‚é€šå¸¸ï¼Œä½ ä¼šæŒ‡å®šä¸€ä¸ªç‰¹å®šçš„äººæ¥ç®¡ç†éƒ¨ç½²ï¼Œå·¥ä½œæµç¨‹ä¸ä¼šåƒå…¶ä»–ä¸¤ä¸ªé€‰é¡¹é‚£æ ·åŸºäº gitã€‚
- ğŸŸ¢ Netlify å’Œ Vercel ä¸ºæ¯ä¸ªæ‹‰å–è¯·æ±‚æä¾›éƒ¨ç½²é¢„è§ˆï¼Œè¿™å¯¹äºå›¢é˜Ÿåœ¨åˆå¹¶åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰å®¡æŸ¥å·¥ä½œå¾ˆæœ‰ç”¨ã€‚ä½ è¿˜å¯ä»¥ç®¡ç†ä¸€ä¸ªå…·æœ‰ä¸åŒæˆå‘˜è®¿é—®éƒ¨ç½²æƒé™çš„å›¢é˜Ÿã€‚
- ğŸŸ¡ GitHub Pages æ— æ³•ä»¥ä¸å¤æ‚çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²é¢„è§ˆã€‚ä¸€ä¸ªä»“åº“åªèƒ½ä¸ä¸€ä¸ªç«™ç‚¹éƒ¨ç½²ç›¸å…³è”ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ å¯ä»¥æ§åˆ¶è°å¯¹ç«™ç‚¹çš„éƒ¨ç½²æœ‰å†™è®¿é—®æƒé™ã€‚

</details>

æ²¡æœ‰ä¸€åŠ³æ°¸é€¸çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨åšå‡ºé€‰æ‹©ä¹‹å‰ï¼Œä½ éœ€è¦æƒè¡¡ä½ çš„éœ€æ±‚å’Œèµ„æºã€‚

## è‡ªä¸»æ‰˜ç®¡ {#self-hosting}

Docusaurus å¯ä»¥ä½¿ç”¨ [`docusaurus serve`](cli.mdx#docusaurus-serve-sitedir) è¿›è¡Œè‡ªä¸»æ‰˜ç®¡ã€‚ä½¿ç”¨ `--port` æ›´æ”¹ç«¯å£ï¼Œä½¿ç”¨ `--host` æ›´æ”¹ä¸»æœºã€‚

```bash npm2yarn
npm run serve -- --build --port 80 --host 0.0.0.0
```

:::warning

ä¸é™æ€æ‰˜ç®¡æä¾›å•†/CDN ç›¸æ¯”ï¼Œè¿™ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚

:::

:::warning

åœ¨ä»¥ä¸‹éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›å¸¸è§çš„æ‰˜ç®¡æä¾›å•†ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ä»¥æœ€æœ‰æ•ˆåœ°éƒ¨ç½² Docusaurus ç«™ç‚¹ã€‚Docusaurus ä¸éš¶å±äºä»»ä½•è¿™äº›æœåŠ¡ï¼Œæ­¤ä¿¡æ¯ä»…ä¸ºæ–¹ä¾¿èµ·è§è€Œæä¾›ã€‚ä¸€äº›æ–‡ç« ç”±ç¬¬ä¸‰æ–¹æä¾›ï¼Œæœ€è¿‘çš„ API æ›´æ”¹å¯èƒ½æœªåœ¨æˆ‘ä»¬è¿™è¾¹åæ˜ ã€‚å¦‚æœä½ çœ‹åˆ°è¿‡æ—¶çš„å†…å®¹ï¼Œæ¬¢è¿æäº¤ PRã€‚

å› ä¸ºæˆ‘ä»¬åªèƒ½å°½åŠ›æä¾›æ­¤å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å·²åœæ­¢æ¥å—æ·»åŠ æ–°æ‰˜ç®¡é€‰é¡¹çš„ PRã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥åœ¨å•ç‹¬çš„ç«™ç‚¹ï¼ˆä¾‹å¦‚ä½ çš„åšå®¢æˆ–æä¾›å•†çš„å®˜æ–¹ç½‘ç«™ï¼‰ä¸Šå‘å¸ƒä½ çš„æ–‡ç« ï¼Œå¹¶è¦æ±‚æˆ‘ä»¬åŒ…å«æŒ‡å‘ä½ æ–‡ç« çš„é“¾æ¥ã€‚

:::

## éƒ¨ç½²åˆ° Netlify {#deploying-to-netlify}

è¦å°†ä½ çš„ Docusaurus ç«™ç‚¹éƒ¨ç½²åˆ° [Netlify](https://www.netlify.com/)ï¼Œé¦–å…ˆè¯·ç¡®ä¿æ­£ç¡®é…ç½®äº†ä»¥ä¸‹é€‰é¡¹ï¼š

```js title="docusaurus.config.js"
export default {
  // highlight-start
  url: 'https://docusaurus-2.netlify.app', // ä½ çš„ç«™ç‚¹çš„ URLï¼Œæœ«å°¾æ— æ–œæ 
  baseUrl: '/', // ä½ çš„ç«™ç‚¹ç›¸å¯¹äºä½ çš„ä»“åº“çš„æ ¹ç›®å½•
  // highlight-end
  // ...
};
```

ç„¶åï¼Œ[ä½¿ç”¨ Netlify åˆ›å»ºä½ çš„ç«™ç‚¹](https://app.netlify.com/start)ã€‚

åœ¨è®¾ç½®ç«™ç‚¹æ—¶ï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šæ„å»ºå‘½ä»¤å’Œç›®å½•ï¼š

- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- å‘å¸ƒç›®å½•ï¼š`build`

å¦‚æœä½ æ²¡æœ‰é…ç½®è¿™äº›æ„å»ºé€‰é¡¹ï¼Œä½ ä»ç„¶å¯ä»¥åœ¨ç«™ç‚¹åˆ›å»ºåè½¬åˆ°â€œSite settingsâ€ -> â€œBuild & deployâ€ã€‚

ä¸€æ—¦ä½¿ç”¨ä¸Šè¿°é€‰é¡¹æ­£ç¡®é…ç½®ï¼Œä½ çš„ç«™ç‚¹åº”è¯¥ä¼šéƒ¨ç½²å¹¶åœ¨åˆå¹¶åˆ°ä½ çš„éƒ¨ç½²åˆ†æ”¯ï¼ˆé»˜è®¤ä¸º `main`ï¼‰æ—¶è‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

:::warning

ä¸€äº› Docusaurus ç«™ç‚¹å°† `docs` æ–‡ä»¶å¤¹æ”¾åœ¨ `website` ä¹‹å¤–ï¼ˆå¾ˆå¯èƒ½æ˜¯ä»¥å‰çš„ Docusaurus v1 ç«™ç‚¹ï¼‰ï¼š

```bash
repo           # git æ ¹ç›®å½•
â”œâ”€â”€ docs       # MD æ–‡ä»¶
â””â”€â”€ website    # Docusaurus æ ¹ç›®å½•
```

å¦‚æœä½ å†³å®šä½¿ç”¨ `website` æ–‡ä»¶å¤¹ä½œä¸º Netlify çš„åŸºæœ¬ç›®å½•ï¼Œå½“ä½ æ›´æ–° `docs` æ–‡ä»¶å¤¹æ—¶ï¼ŒNetlify å°†ä¸ä¼šè§¦å‘æ„å»ºï¼Œä½ éœ€è¦é…ç½®ä¸€ä¸ª[è‡ªå®šä¹‰çš„ `ignore` å‘½ä»¤](https://docs.netlify.com/configure-builds/common-configurations/ignore-builds/)ï¼š

```toml title="website/netlify.toml"
[build]
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF . ../docs/"
```

:::

:::warning

é»˜è®¤æƒ…å†µä¸‹ï¼ŒNetlify ä¼šåœ¨ Docusaurus URL çš„æœ«å°¾æ·»åŠ æ–œæ ã€‚

å»ºè®®ç¦ç”¨ Netlify è®¾ç½® `Post Processing > Asset Optimization > Pretty Urls`ï¼Œä»¥é˜²æ­¢å°å†™ URLã€ä¸å¿…è¦çš„é‡å®šå‘å’Œ 404 é”™è¯¯ã€‚

**è¯·ç‰¹åˆ«æ³¨æ„**ï¼š`Disable asset optimization` å…¨å±€å¤é€‰æ¡†å·²æŸåï¼Œå®é™…ä¸Šå¹¶ä¸èƒ½ç¦ç”¨ `Pretty URLs` è®¾ç½®ã€‚è¯·ç¡®ä¿**ç‹¬ç«‹å–æ¶ˆé€‰ä¸­å®ƒ**ã€‚

å¦‚æœä½ æƒ³ä¿æŒ Netlify çš„ `Pretty Urls` è®¾ç½®å¼€å¯ï¼Œè¯·é€‚å½“åœ°è°ƒæ•´ `trailingSlash` Docusaurus é…ç½®ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚é˜… [slorber/trailing-slash-guide](https://github.com/slorber/trailing-slash-guide)ã€‚

:::

## éƒ¨ç½²åˆ° Vercel {#deploying-to-vercel}

å°†ä½ çš„ Docusaurus é¡¹ç›®éƒ¨ç½²åˆ° [Vercel](https://vercel.com/) å°†åœ¨æ€§èƒ½å’Œæ˜“ç”¨æ€§æ–¹é¢ä¸ºä½ æä¾›[å„ç§å¥½å¤„](https://vercel.com/)ã€‚

è¦ä½¿ç”¨ [Vercel for Git é›†æˆ](https://vercel.com/docs/concepts/git)éƒ¨ç½²ä½ çš„ Docusaurus é¡¹ç›®ï¼Œè¯·ç¡®ä¿å®ƒå·²æ¨é€åˆ° Git ä»“åº“ã€‚

ä½¿ç”¨[å¯¼å…¥æµç¨‹](https://vercel.com/import/git)å°†é¡¹ç›®å¯¼å…¥åˆ° Vercelã€‚åœ¨å¯¼å…¥è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘ç°æ‰€æœ‰ç›¸å…³é€‰é¡¹éƒ½å·²ä¸ºä½ é¢„å…ˆé…ç½®å¥½ï¼›ä½†æ˜¯ï¼Œä½ å¯ä»¥é€‰æ‹©æ›´æ”¹è¿™äº›[é€‰é¡¹](https://vercel.com/docs/build-step#build-&-development-settings)ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚

é¡¹ç›®å¯¼å…¥åï¼Œæ‰€æœ‰åç»­å¯¹åˆ†æ”¯çš„æ¨é€éƒ½å°†ç”Ÿæˆ[é¢„è§ˆéƒ¨ç½²](https://vercel.com/docs/platform/deployments#preview)ï¼Œå¯¹[ç”Ÿäº§åˆ†æ”¯](https://vercel.com/docs/git-integrations#production-branch)ï¼ˆé€šå¸¸æ˜¯ "main" æˆ– "master"ï¼‰çš„æ‰€æœ‰æ›´æ”¹éƒ½å°†å¯¼è‡´[ç”Ÿäº§éƒ¨ç½²](https://vercel.com/docs/platform/deployments#production)ã€‚

## éƒ¨ç½²åˆ° GitHub Pages {#deploying-to-github-pages}

Docusaurus æä¾›äº†ä¸€ç§ç®€ä¾¿çš„æ–¹å¼æ¥å‘å¸ƒåˆ° [GitHub Pages](https://pages.github.com/)ï¼Œæ¯ä¸ª GitHub ä»“åº“éƒ½å…è´¹æä¾›ã€‚

### æ¦‚è¿° {#github-pages-overview}

é€šå¸¸ï¼Œå‘å¸ƒè¿‡ç¨‹æ¶‰åŠä¸¤ä¸ªä»“åº“ï¼ˆè‡³å°‘ä¸¤ä¸ªåˆ†æ”¯ï¼‰ï¼šåŒ…å«æºæ–‡ä»¶çš„åˆ†æ”¯å’ŒåŒ…å«è¦ç”± GitHub Pages æä¾›çš„æ„å»ºè¾“å‡ºçš„åˆ†æ”¯ã€‚åœ¨ä»¥ä¸‹æ•™ç¨‹ä¸­ï¼Œå®ƒä»¬å°†åˆ†åˆ«è¢«ç§°ä¸º**â€œæºâ€**å’Œ**â€œéƒ¨ç½²â€**ã€‚

æ¯ä¸ª GitHub ä»“åº“éƒ½ä¸ä¸€ä¸ª GitHub Pages æœåŠ¡ç›¸å…³è”ã€‚å¦‚æœéƒ¨ç½²ä»“åº“åä¸º `my-org/my-project`ï¼ˆå…¶ä¸­ `my-org` æ˜¯ç»„ç»‡æˆ–ç”¨æˆ·åï¼‰ï¼Œåˆ™éƒ¨ç½²çš„ç«™ç‚¹å°†å‡ºç°åœ¨ `https://my-org.github.io/my-project/`ã€‚å¦‚æœéƒ¨ç½²ä»“åº“åä¸º `my-org/my-org.github.io`ï¼ˆ_ç»„ç»‡ GitHub Pages ä»“åº“_ï¼‰ï¼Œåˆ™ç«™ç‚¹å°†å‡ºç°åœ¨ `https://my-org.github.io/`ã€‚

:::info

å¦‚æœä½ æƒ³ä¸º GitHub Pages ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œè¯·åœ¨ `static` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª `CNAME` æ–‡ä»¶ã€‚`static` ç›®å½•ä¸­çš„ä»»ä½•å†…å®¹éƒ½å°†è¢«å¤åˆ¶åˆ° `build` ç›®å½•çš„æ ¹ç›®å½•ä»¥è¿›è¡Œéƒ¨ç½²ã€‚ä½¿ç”¨è‡ªå®šä¹‰åŸŸåæ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿä» `baseUrl: '/projectName/'` æ”¹å› `baseUrl: '/'`ï¼Œå¹¶å°† `url` è®¾ç½®ä¸ºä½ çš„è‡ªå®šä¹‰åŸŸåã€‚

æ›´å¤šè¯¦æƒ…è¯·å‚é˜… GitHub Pages çš„æ–‡æ¡£ [User, Organization, and Project Pages](https://help.github.com/en/articles/user-organization-and-project-pages)ã€‚

:::

GitHub Pages ä»é»˜è®¤åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `master` / `main`ï¼‰æˆ– `gh-pages` åˆ†æ”¯ï¼Œä»¥åŠä»æ ¹ç›®å½•æˆ– `/docs` æ–‡ä»¶å¤¹ä¸­è·å–å¯éƒ¨ç½²çš„æ–‡ä»¶ï¼ˆ`docusaurus build` çš„è¾“å‡ºï¼‰ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ä»“åº“ä¸­çš„ `Settings > Pages` ä¸­è¿›è¡Œé…ç½®ã€‚æ­¤åˆ†æ”¯å°†è¢«ç§°ä¸ºâ€œéƒ¨ç½²åˆ†æ”¯â€ã€‚

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª `docusaurus deploy` å‘½ä»¤ï¼Œå¯ä»¥å¸®åŠ©ä½ ç”¨ä¸€ä¸ªå‘½ä»¤å°†ä½ çš„ç«™ç‚¹ä»æºåˆ†æ”¯éƒ¨ç½²åˆ°éƒ¨ç½²åˆ†æ”¯ï¼šå…‹éš†ã€æ„å»ºå’Œæäº¤ã€‚

### `docusaurus.config.js` è®¾ç½® {#docusaurusconfigjs-settings}

é¦–å…ˆï¼Œä¿®æ”¹ä½ çš„ `docusaurus.config.js` å¹¶æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š

| åç§° | æè¿° |
| --- | --- |
| `organizationName` | æ‹¥æœ‰éƒ¨ç½²ä»“åº“çš„ GitHub ç”¨æˆ·æˆ–ç»„ç»‡ã€‚ |
| `projectName` | éƒ¨ç½²ä»“åº“çš„åç§°ã€‚ |
| `deploymentBranch` | éƒ¨ç½²åˆ†æ”¯çš„åç§°ã€‚å¯¹äºéç»„ç»‡ GitHub Pages ä»“åº“ï¼ˆ`projectName` ä¸ä»¥ `.github.io` ç»“å°¾ï¼‰ï¼Œå®ƒé»˜è®¤ä¸º `'gh-pages'`ã€‚å¦åˆ™ï¼Œéœ€è¦ä½œä¸ºé…ç½®å­—æ®µæˆ–ç¯å¢ƒå˜é‡æ˜ç¡®æŒ‡å®šã€‚ |

è¿™äº›å­—æ®µä¹Ÿæœ‰å…¶å¯¹åº”çš„ç¯å¢ƒå˜é‡ï¼Œä¼˜å…ˆçº§æ›´é«˜ï¼š`ORGANIZATION_NAME`ã€`PROJECT_NAME` å’Œ `DEPLOYMENT_BRANCH`ã€‚

:::warning

é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitHub Pages ä¼šåœ¨ Docusaurus URL çš„æœ«å°¾æ·»åŠ æ–œæ ã€‚å»ºè®®è®¾ç½®ä¸€ä¸ª `trailingSlash` é…ç½®ï¼ˆ`true` æˆ– `false`ï¼Œè€Œä¸æ˜¯ `undefined`ï¼‰ã€‚

:::

ç¤ºä¾‹ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  url: 'https://endiliey.github.io', // ä½ çš„ç½‘ç«™ URL
  baseUrl: '/',
  // highlight-start
  projectName: 'endiliey.github.io',
  organizationName: 'endiliey',
  trailingSlash: false,
  // highlight-end
  // ...
};
```

:::warning

é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitHub Pages ä¼šé€šè¿‡ [Jekyll](https://jekyllrb.com/) è¿è¡Œå‘å¸ƒçš„æ–‡ä»¶ã€‚ç”±äº Jekyll ä¼šä¸¢å¼ƒä»»ä½•ä»¥ `_` å¼€å¤´çš„æ–‡ä»¶ï¼Œå»ºè®®ä½ é€šè¿‡åœ¨ `static` ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ªåä¸º `.nojekyll` çš„ç©ºæ–‡ä»¶æ¥ç¦ç”¨ Jekyllã€‚

:::

### ç¯å¢ƒè®¾ç½® {#environment-settings}

| åç§° | æè¿° |
| --- | --- |
| `USE_SSH` | è®¾ç½®ä¸º `true` ä»¥ä½¿ç”¨ SSH è€Œä¸æ˜¯é»˜è®¤çš„ HTTPS è¿æ¥åˆ° GitHub ä»“åº“ã€‚å¦‚æœæºä»“åº“ URL æ˜¯ä¸€ä¸ª SSH URLï¼ˆä¾‹å¦‚ `git@github.com:facebook/docusaurus.git`ï¼‰ï¼Œåˆ™ `USE_SSH` è¢«æ¨æ–­ä¸º `true`ã€‚ |
| `GIT_USER` | **å¯¹éƒ¨ç½²ä»“åº“æœ‰æ¨é€æƒé™**çš„ GitHub å¸æˆ·çš„ç”¨æˆ·åã€‚å¯¹äºä½ è‡ªå·±çš„ä»“åº“ï¼Œè¿™é€šå¸¸æ˜¯ä½ çš„ GitHub ç”¨æˆ·åã€‚å¦‚æœä¸ä½¿ç”¨ SSHï¼Œåˆ™ä¸ºå¿…éœ€ï¼Œå¦åˆ™å°†è¢«å¿½ç•¥ã€‚ |
| `GIT_PASS` | git ç”¨æˆ·çš„ä¸ªäººè®¿é—®ä»¤ç‰Œï¼ˆç”± `GIT_USER` æŒ‡å®šï¼‰ï¼Œä»¥æ–¹ä¾¿éäº¤äº’å¼éƒ¨ç½²ï¼ˆä¾‹å¦‚æŒç»­éƒ¨ç½²ï¼‰|
| `CURRENT_BRANCH` | æºåˆ†æ”¯ã€‚é€šå¸¸ï¼Œåˆ†æ”¯å°†æ˜¯ `main` æˆ– `master`ï¼Œä½†å¯ä»¥æ˜¯é™¤ `gh-pages` ä¹‹å¤–çš„ä»»ä½•åˆ†æ”¯ã€‚å¦‚æœæœªä¸ºæ­¤å˜é‡è®¾ç½®ä»»ä½•å†…å®¹ï¼Œåˆ™å°†ä½¿ç”¨è°ƒç”¨ `docusaurus deploy` çš„å½“å‰åˆ†æ”¯ã€‚ |
| `GIT_USER_NAME` | æ¨é€åˆ°éƒ¨ç½²ä»“åº“æ—¶ä½¿ç”¨çš„ `git config user.name` å€¼ |
| `GIT_USER_EMAIL` | æ¨é€åˆ°éƒ¨ç½²ä»“åº“æ—¶ä½¿ç”¨çš„ `git config user.email` å€¼ |

GitHub Enterprise å®‰è£…åº”ä¸ github.com ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œï¼›ä½ åªéœ€è¦å°†ç»„ç»‡çš„ GitHub Enterprise ä¸»æœºè®¾ç½®ä¸ºç¯å¢ƒå˜é‡ï¼š

| åç§°          | æè¿°                                     |
| ------------- | ----------------------------------------------- |
| `GITHUB_HOST` | ä½ çš„ GitHub Enterprise ç«™ç‚¹çš„åŸŸåã€‚ |
| `GITHUB_PORT` | ä½ çš„ GitHub Enterprise ç«™ç‚¹çš„ç«¯å£ã€‚        |

### éƒ¨ç½² {#deploy}

æœ€åï¼Œè¦å°†ä½ çš„ç«™ç‚¹éƒ¨ç½²åˆ° GitHub Pagesï¼Œè¯·è¿è¡Œï¼š

```mdx-code-block
<Tabs>
<TabItem value="bash" label="Bash">
```

```bash
GIT_USER=<GITHUB_USERNAME> yarn deploy
```

```mdx-code-block
</TabItem>
<TabItem value="windows" label="Windows">
```

```batch
cmd /C "set "GIT_USER=<GITHUB_USERNAME>" && yarn deploy"
```

```mdx-code-block
</TabItem>
<TabItem value="powershell" label="PowerShell">
```

```powershell
cmd /C 'set "GIT_USER=<GITHUB_USERNAME>" && yarn deploy'
```

```mdx-code-block
</TabItem>
</Tabs>
```

:::warning

ä» 2021 å¹´ 8 æœˆå¼€å§‹ï¼ŒGitHub è¦æ±‚æ¯æ¬¡å‘½ä»¤è¡Œç™»å½•éƒ½ä½¿ç”¨**ä¸ªäººè®¿é—®ä»¤ç‰Œ**è€Œä¸æ˜¯å¯†ç ã€‚å½“ GitHub æç¤ºè¾“å…¥å¯†ç æ—¶ï¼Œè¯·è¾“å…¥ PATã€‚æ›´å¤šä¿¡æ¯è¯·å‚é˜… [GitHub æ–‡æ¡£](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)ã€‚

æˆ–è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨ SSH (`USE_SSH=true`) ç™»å½•ã€‚

:::

### ä½¿ç”¨ GitHub Actions è§¦å‘éƒ¨ç½² {#triggering-deployment-with-github-actions}

[GitHub Actions](https://help.github.com/en/actions) å…è®¸ä½ åœ¨ä½ çš„ä»“åº“ä¸­è‡ªåŠ¨åŒ–ã€è‡ªå®šä¹‰å’Œæ‰§è¡Œä½ çš„è½¯ä»¶å¼€å‘å·¥ä½œæµç¨‹ã€‚

ä¸‹é¢çš„å·¥ä½œæµç¤ºä¾‹å‡è®¾ä½ çš„ç½‘ç«™æºä½äºä½ çš„ä»“åº“çš„ `main` åˆ†æ”¯ï¼ˆ_æºåˆ†æ”¯_æ˜¯ `main`ï¼‰ï¼Œå¹¶ä¸”ä½ çš„[å‘å¸ƒæº](https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)è¢«é…ç½®ä¸º[ä½¿ç”¨è‡ªå®šä¹‰ GitHub Actions å·¥ä½œæµå‘å¸ƒ](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#publishing-with-a-custom-github-actions-workflow)ã€‚

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š

1. å½“å‘ `main` å‘å‡ºæ–°çš„æ‹‰å–è¯·æ±‚æ—¶ï¼Œæœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥ç¡®ä¿ç«™ç‚¹æˆåŠŸæ„å»ºï¼Œè€Œæ— éœ€å®é™…éƒ¨ç½²ã€‚æ­¤ä½œä¸šå°†è¢«ç§°ä¸º `test-deploy`ã€‚
2. å½“æ‹‰å–è¯·æ±‚åˆå¹¶åˆ° `main` åˆ†æ”¯æˆ–æœ‰äººç›´æ¥æ¨é€åˆ° `main` åˆ†æ”¯æ—¶ï¼Œå®ƒå°†è¢«æ„å»ºå¹¶éƒ¨ç½²åˆ° GitHub Pagesã€‚æ­¤ä½œä¸šå°†è¢«ç§°ä¸º `deploy`ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ GitHub Actions éƒ¨ç½²ä½ çš„æ–‡æ¡£çš„ä¸¤ç§æ–¹æ³•ã€‚æ ¹æ®ä½ çš„éƒ¨ç½²ä»“åº“çš„ä½ç½®ï¼Œé€‰æ‹©ä¸‹é¢çš„ç›¸å…³é€‰é¡¹å¡ï¼š

- æºä»“åº“å’Œéƒ¨ç½²ä»“åº“æ˜¯**åŒä¸€ä¸ª**ä»“åº“ã€‚
- éƒ¨ç½²ä»“åº“æ˜¯ä¸æºä¸åŒçš„**è¿œç¨‹**ä»“åº“ã€‚æ­¤åœºæ™¯çš„è¯´æ˜å‡è®¾[å‘å¸ƒæº](https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)æ˜¯ `gh-pages` åˆ†æ”¯ã€‚

```mdx-code-block
<Tabs>
<TabItem value="same" label="ç›¸åŒä»“åº“">
```

è™½ç„¶ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªå·¥ä½œæµæ–‡ä»¶ä¸­å®šä¹‰ä¸¤ä¸ªä½œä¸šï¼Œä½†åŸå§‹çš„ `deploy` å·¥ä½œæµåœ¨ PR æ£€æŸ¥å¥—ä»¶çŠ¶æ€ä¸­å°†å§‹ç»ˆè¢«åˆ—ä¸ºè·³è¿‡ï¼Œè¿™ä¸èƒ½æŒ‡ç¤ºå®é™…çŠ¶æ€ï¼Œä¹Ÿæ— æ³•ä¸ºå®¡æŸ¥è¿‡ç¨‹æä¾›ä»·å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®å°†å®ƒä»¬ä½œä¸ºå•ç‹¬çš„å·¥ä½œæµè¿›è¡Œç®¡ç†ã€‚

<details>
<summary>GitHub Action æ–‡ä»¶</summary>

æ·»åŠ è¿™ä¸¤ä¸ªå·¥ä½œæµæ–‡ä»¶ï¼š

:::warning ä¸ºä½ çš„è®¾ç½®è°ƒæ•´å‚æ•°

å¦‚æœä½ çš„ Docusaurus é¡¹ç›®ä¸åœ¨ä½ çš„ä»“åº“çš„æ ¹ç›®å½•ï¼Œä½ å¯èƒ½éœ€è¦é…ç½®ä¸€ä¸ª[é»˜è®¤å·¥ä½œç›®å½•](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#example-set-the-default-shell-and-working-directory)ï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´è·¯å¾„ã€‚

:::

<Tabs>
  <TabItem value="npm" label="npm">

```yml title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
    # å¦‚æœä½ æƒ³è¿›ä¸€æ­¥å®šä¹‰è§¦å‘å™¨ã€è·¯å¾„ç­‰ï¼Œè¯·æŸ¥é˜… gh actions æ–‡æ¡£
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  build:
    name: Build Docusaurus
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: npm

      - name: Install dependencies
        run: npm ci
      - name: Build website
        run: npm run build

      - name: Upload Build Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: build

  deploy:
    name: Deploy to GitHub Pages
    needs: build

    # æˆäºˆ GITHUB_TOKEN æ‰€éœ€çš„æƒé™ä»¥è¿›è¡Œ Pages éƒ¨ç½²
    permissions:
      pages: write # éƒ¨ç½²åˆ° Pages
      id-token: write # éªŒè¯éƒ¨ç½²æ˜¯å¦æ¥è‡ªé€‚å½“çš„æº

    # éƒ¨ç½²åˆ° github-pages ç¯å¢ƒ
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

```yml title=".github/workflows/test-deploy.yml"
name: Test deployment

on:
  pull_request:
    branches:
      - main
    # å¦‚æœä½ æƒ³è¿›ä¸€æ­¥å®šä¹‰è§¦å‘å™¨ã€è·¯å¾„ç­‰ï¼Œè¯·æŸ¥é˜… gh actions æ–‡æ¡£
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  test-deploy:
    name: Test deployment
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: npm

      - name: Install dependencies
        run: npm ci
      - name: Test build website
        run: npm run build
```

  </TabItem>
  <TabItem value="yarn" label="Yarn">

```yml title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
    # å¦‚æœä½ æƒ³è¿›ä¸€æ­¥å®šä¹‰è§¦å‘å™¨ã€è·¯å¾„ç­‰ï¼Œè¯·æŸ¥é˜… gh actions æ–‡æ¡£
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  build:
    name: Build Docusaurus
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Build website
        run: yarn build

      - name: Upload Build Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: build

  deploy:
    name: Deploy to GitHub Pages
    needs: build

    # æˆäºˆ GITHUB_TOKEN æ‰€éœ€çš„æƒé™ä»¥è¿›è¡Œ Pages éƒ¨ç½²
    permissions:
      pages: write # éƒ¨ç½²åˆ° Pages
      id-token: write # éªŒè¯éƒ¨ç½²æ˜¯å¦æ¥è‡ªé€‚å½“çš„æº

    # éƒ¨ç½²åˆ° github-pages ç¯å¢ƒ
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

```yml title=".github/workflows/test-deploy.yml"
name: Test deployment

on:
  pull_request:
    branches:
      - main
    # å¦‚æœä½ æƒ³è¿›ä¸€æ­¥å®šä¹‰è§¦å‘å™¨ã€è·¯å¾„ç­‰ï¼Œè¯·æŸ¥é˜… gh actions æ–‡æ¡£
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  test-deploy:
    name: Test deployment
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Test build website
        run: yarn build
```

  </TabItem>
</Tabs>

</details>

```mdx-code-block
</TabItem>
<TabItem value="remote" label="è¿œç¨‹ä»“åº“">
```

è·¨ä»“åº“å‘å¸ƒè®¾ç½®èµ·æ¥æ›´å›°éš¾ï¼Œå› ä¸ºä½ éœ€è¦æ¨é€åˆ°å¦ä¸€ä¸ªæœ‰æƒé™æ£€æŸ¥çš„ä»“åº“ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ SSH è¿›è¡Œèº«ä»½éªŒè¯ã€‚

1. ç”Ÿæˆä¸€ä¸ªæ–°çš„ [SSH å¯†é’¥](https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)ã€‚ç”±äºæ­¤ SSH å¯†é’¥å°†åœ¨ CI ä¸­ä½¿ç”¨ï¼Œè¯·ç¡®ä¿ä¸è¦è¾“å…¥ä»»ä½•å¯†ç çŸ­è¯­ã€‚
2. é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„å…¬é’¥åº”è¯¥å·²åœ¨ `~/.ssh/id_rsa.pub` ä¸­åˆ›å»ºï¼›å¦åˆ™ï¼Œè¯·ä½¿ç”¨ä½ åœ¨ä¸Šä¸€æ­¥ä¸­æä¾›çš„åç§°å°†ä½ çš„å¯†é’¥æ·»åŠ åˆ° [GitHub éƒ¨ç½²å¯†é’¥](https://developer.github.com/v3/guides/managing-deploy-keys/)ã€‚
3. ä½¿ç”¨ `pbcopy < ~/.ssh/id_rsa.pub` å°†å¯†é’¥å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¹¶å°†å…¶ä½œä¸º[éƒ¨ç½²å¯†é’¥](https://developer.github.com/v3/guides/managing-deploy-keys/#deploy-keys)ç²˜è´´åˆ°éƒ¨ç½²ä»“åº“ä¸­ã€‚å¦‚æœå‘½ä»¤è¡Œå¯¹ä½ ä¸èµ·ä½œç”¨ï¼Œè¯·å¤åˆ¶æ–‡ä»¶å†…å®¹ã€‚åœ¨ä¿å­˜ä½ çš„éƒ¨ç½²å¯†é’¥ä¹‹å‰ï¼Œè¯·é€‰ä¸­ `Allow write access` å¤é€‰æ¡†ã€‚
4. ä½ éœ€è¦ä½ çš„ç§é’¥ä½œä¸º [GitHub secret](https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets) ä»¥å…è®¸ Docusaurus ä¸ºä½ è¿è¡Œéƒ¨ç½²ã€‚
5. ä½¿ç”¨ `pbcopy < ~/.ssh/id_rsa` å¤åˆ¶ä½ çš„ç§é’¥ï¼Œå¹¶åœ¨ä½ çš„æºä»“åº“ä¸Šç²˜è´´ä¸€ä¸ªåä¸º `GH_PAGES_DEPLOY` çš„ GitHub secretã€‚å¦‚æœå‘½ä»¤è¡Œå¯¹ä½ ä¸èµ·ä½œç”¨ï¼Œè¯·å¤åˆ¶æ–‡ä»¶å†…å®¹ã€‚ä¿å­˜ä½ çš„ secretã€‚
6. åœ¨ `.github/workflows/` ç›®å½•ä¸­åˆ›å»ºä½ çš„[æ–‡æ¡£å·¥ä½œæµ](https://docs.github.com/en/actions/use-cases-and-examples/creating-an-example-workflow)ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯ `deploy.yml` æ–‡ä»¶ã€‚

æ­¤æ—¶ï¼Œä½ åº”è¯¥æœ‰ï¼š

- è®¾ç½®äº† GitHub å·¥ä½œæµå¹¶å°†ç§æœ‰ SSH å¯†é’¥ä½œä¸º GitHub Secret çš„æºä»“åº“ï¼Œä»¥åŠ
- åœ¨ GitHub éƒ¨ç½²å¯†é’¥ä¸­è®¾ç½®äº†å…¬å…± SSH å¯†é’¥çš„éƒ¨ç½²ä»“åº“ã€‚

<details>

<summary>GitHub action æ–‡ä»¶</summary>

:::warning

è¯·ç¡®ä¿å°† `actions@github.com` æ›¿æ¢ä¸ºä½ çš„ GitHub ç”µå­é‚®ä»¶ï¼Œå¹¶å°† `gh-actions` æ›¿æ¢ä¸ºä½ çš„åå­—ã€‚

æ­¤æ–‡ä»¶å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Yarnã€‚å¦‚æœä½ ä½¿ç”¨ npmï¼Œè¯·ç›¸åº”åœ°å°† `cache: yarn`ã€`yarn install --frozen-lockfile`ã€`yarn build` æ›´æ”¹ä¸º `cache: npm`ã€`npm ci`ã€`npm run build`ã€‚

:::

```yml title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

permissions:
  contents: write

jobs:
  test-deploy:
    if: github.event_name != 'push'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: yarn
      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Test build website
        run: yarn build
  deploy:
    if: github.event_name != 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: yarn
      - uses: webfactory/ssh-agent@v0.5.0
        with:
          ssh-private-key: ${{ secrets.GH_PAGES_DEPLOY }}
      - name: Deploy to GitHub Pages
        env:
          USE_SSH: true
        run: |
          git config --global user.email "actions@github.com"
          git config --global user.name "gh-actions"
          yarn install --frozen-lockfile
          yarn deploy
```

</details>

```mdx-code-block
</TabItem>
</Tabs>
```

<details>

<summary>ç«™ç‚¹æœªæ­£ç¡®éƒ¨ç½²ï¼Ÿ</summary>

æ¨é€åˆ° main åï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨æ‰€éœ€ä½ç½®çœ‹åˆ°ä½ çš„ç«™ç‚¹å‘å¸ƒï¼ˆä¾‹å¦‚ï¼Œå®ƒæ˜¾ç¤ºâ€œè¿™é‡Œæ²¡æœ‰ GitHub Pages ç«™ç‚¹â€ï¼Œæˆ–è€…å®ƒæ­£åœ¨æ˜¾ç¤ºä½ çš„ä»“åº“çš„ README.md æ–‡ä»¶ï¼‰ï¼Œè¯·å°è¯•ä»¥ä¸‹æ“ä½œï¼š

- ç­‰å¾…å¤§çº¦ä¸‰åˆ†é’Ÿå¹¶åˆ·æ–°ã€‚GitHub pages å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½è·å–æ–°æ–‡ä»¶ã€‚
- æ£€æŸ¥ä½ çš„ä»“åº“çš„ç™»é™†é¡µé¢ï¼ŒæŸ¥çœ‹æœ€åä¸€æ¬¡æäº¤æ ‡é¢˜æ—è¾¹æ˜¯å¦æœ‰ä¸€ä¸ªç»¿è‰²çš„å°å‹¾ï¼Œè¡¨ç¤º CI å·²é€šè¿‡ã€‚å¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªå‰ï¼Œè¡¨ç¤ºæ„å»ºæˆ–éƒ¨ç½²å¤±è´¥ï¼Œä½ åº”è¯¥æ£€æŸ¥æ—¥å¿—ä»¥è·å–æ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚
- ç‚¹å‡»å‹¾ï¼Œå¹¶ç¡®ä¿ä½ çœ‹åˆ°äº†ä¸€ä¸ªâ€œDeploy to GitHub Pagesâ€å·¥ä½œæµã€‚åƒâ€œpages build and deployment / deployâ€è¿™æ ·çš„åç§°æ˜¯ GitHub çš„é»˜è®¤å·¥ä½œæµï¼Œè¡¨ç¤ºä½ çš„è‡ªå®šä¹‰éƒ¨ç½²å·¥ä½œæµæ ¹æœ¬æ²¡æœ‰è¢«è§¦å‘ã€‚ç¡®ä¿ YAML æ–‡ä»¶æ”¾åœ¨ `.github/workflows` æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸”è§¦å‘æ¡ä»¶è®¾ç½®æ­£ç¡®ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½ çš„é»˜è®¤åˆ†æ”¯æ˜¯ "master" è€Œä¸æ˜¯ "main"ï¼Œä½ éœ€è¦æ›´æ”¹ `on.push` å±æ€§ï¼‰ã€‚
- åœ¨ä½ çš„ä»“åº“çš„ Settings > Pages ä¸‹ï¼Œç¡®ä¿â€œSourceâ€ï¼ˆè¿™æ˜¯_éƒ¨ç½²_æ–‡ä»¶çš„æ¥æºï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æœ¯è¯­ä¸­çš„â€œæºâ€ï¼‰è¢«è®¾ç½®ä¸ºâ€œgh-pagesâ€ + â€œ/ (root)â€ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ `gh-pages` ä½œä¸ºéƒ¨ç½²åˆ†æ”¯ã€‚

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼š

- å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œè¯·éªŒè¯ä½ æ˜¯å¦è®¾ç½®äº†æ­£ç¡®çš„ DNS è®°å½•ã€‚è¯·å‚é˜…[GitHub pages å…³äºé…ç½®è‡ªå®šä¹‰åŸŸåçš„æ–‡æ¡£](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages)ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„ï¼ŒDNS æ›´æ”¹å¯èƒ½éœ€è¦é•¿è¾¾ 24 å°æ—¶æ‰èƒ½åœ¨äº’è”ç½‘ä¸Šä¼ æ’­ã€‚

</details>

### ä½¿ç”¨ Travis CI è§¦å‘éƒ¨ç½² {#triggering-deployment-with-travis-ci}

æŒç»­é›†æˆï¼ˆCIï¼‰æœåŠ¡é€šå¸¸ç”¨äºåœ¨æ¯æ¬¡æ–°æäº¤æ£€å…¥æºä»£ç æ§åˆ¶æ—¶æ‰§è¡Œä¾‹è¡Œä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡å¯ä»¥æ˜¯è¿è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€è‡ªåŠ¨åŒ–æ„å»ºã€å°†åŒ…å‘å¸ƒåˆ° npm ä»¥åŠå°†æ›´æ”¹éƒ¨ç½²åˆ°ä½ çš„ç½‘ç«™çš„ä»»æ„ç»„åˆã€‚è¦è‡ªåŠ¨åŒ–ä½ çš„ç½‘ç«™éƒ¨ç½²ï¼Œä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨ä½ çš„ç½‘ç«™æ›´æ–°æ—¶è°ƒç”¨ `yarn deploy` è„šæœ¬ã€‚ä»¥ä¸‹éƒ¨åˆ†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ [Travis CI](https://travis-ci.com/)ï¼ˆä¸€ä¸ªæµè¡Œçš„æŒç»­é›†æˆæœåŠ¡æä¾›å•†ï¼‰æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

1. è½¬åˆ° https://github.com/settings/tokens å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„[ä¸ªäººè®¿é—®ä»¤ç‰Œ](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)ã€‚åˆ›å»ºä»¤ç‰Œæ—¶ï¼Œæˆäºˆå®ƒ `repo` èŒƒå›´ï¼Œä»¥ä¾¿å®ƒå…·æœ‰æ‰€éœ€çš„æƒé™ã€‚
2. ä½¿ç”¨ä½ çš„ GitHub å¸æˆ·ï¼Œ[å°† Travis CI åº”ç”¨æ·»åŠ åˆ°](https://github.com/marketplace/travis-ci)ä½ æƒ³è¦æ¿€æ´»çš„ä»“åº“ã€‚
3. æ‰“å¼€ä½ çš„ Travis CI ä»ªè¡¨æ¿ã€‚URL çœ‹èµ·æ¥åƒ `https://travis-ci.com/USERNAME/REPO`ï¼Œå¹¶å¯¼èˆªåˆ°ä½ çš„ä»“åº“çš„ `More options > Setting > Environment Variables` éƒ¨åˆ†ã€‚
4. åˆ›å»ºä¸€ä¸ªåä¸º `GH_TOKEN` çš„æ–°ç¯å¢ƒå˜é‡ï¼Œå…¶å€¼ä¸ºä½ æ–°ç”Ÿæˆçš„ä»¤ç‰Œï¼Œç„¶åæ˜¯ `GH_EMAIL`ï¼ˆä½ çš„ç”µå­é‚®ä»¶åœ°å€ï¼‰å’Œ `GH_NAME`ï¼ˆä½ çš„ GitHub ç”¨æˆ·åï¼‰ã€‚
5. åœ¨ä½ çš„ä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.travis.yml`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```yml title=".travis.yml"
language: node_js
node_js:
  - 18
branches:
  only:
    - main
cache:
  yarn: true
script:
  - git config --global user.name "${GH_NAME}"
  - git config --global user.email "${GH_EMAIL}"
  - echo "machine github.com login ${GH_NAME} password ${GH_TOKEN}" > ~/.netrc
  - yarn install
  - GIT_USER="${GH_NAME}" yarn deploy
```

ç°åœ¨ï¼Œæ¯å½“æœ‰æ–°çš„æäº¤è¿›å…¥ `main` åˆ†æ”¯æ—¶ï¼ŒTravis CI éƒ½ä¼šè¿è¡Œä½ çš„æµ‹è¯•å¥—ä»¶ï¼Œå¦‚æœä¸€åˆ‡é€šè¿‡ï¼Œä½ çš„ç½‘ç«™å°†é€šè¿‡ `yarn deploy` è„šæœ¬è¿›è¡Œéƒ¨ç½²ã€‚

### ä½¿ç”¨ Buddy è§¦å‘éƒ¨ç½² {#triggering-deployment-with-buddy}

[Buddy](https://buddy.works/) æ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ CI/CD å·¥å…·ï¼Œå…è®¸ä½ è‡ªåŠ¨åŒ–å°†ä½ çš„é—¨æˆ·éƒ¨ç½²åˆ°ä¸åŒç¯å¢ƒï¼ŒåŒ…æ‹¬ GitHub Pagesã€‚

æŒ‰ç…§è¿™äº›æ­¥éª¤åˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œæ¯å½“ä½ å°†æ›´æ”¹æ¨é€åˆ°é¡¹ç›®çš„é€‰å®šåˆ†æ”¯æ—¶ï¼Œè¯¥ç®¡é“å°±ä¼šè‡ªåŠ¨éƒ¨ç½²ä½ çš„ç½‘ç«™çš„æ–°ç‰ˆæœ¬ï¼š

1. è½¬åˆ° https://github.com/settings/tokens å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„[ä¸ªäººè®¿é—®ä»¤ç‰Œ](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)ã€‚åˆ›å»ºä»¤ç‰Œæ—¶ï¼Œæˆäºˆå®ƒ `repo` èŒƒå›´ï¼Œä»¥ä¾¿å®ƒå…·æœ‰æ‰€éœ€çš„æƒé™ã€‚
2. ç™»å½•åˆ°ä½ çš„ Buddy å¸æˆ·å¹¶åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚
3. é€‰æ‹© GitHub ä½œä¸ºä½ çš„ git æ‰˜ç®¡æä¾›å•†ï¼Œå¹¶é€‰æ‹©åŒ…å«ä½ çš„ç½‘ç«™ä»£ç çš„ä»“åº“ã€‚
4. ä½¿ç”¨å·¦ä¾§å¯¼èˆªé¢æ¿ï¼Œåˆ‡æ¢åˆ° `Pipelines` è§†å›¾ã€‚
5. åˆ›å»ºä¸€ä¸ªæ–°ç®¡é“ã€‚å®šä¹‰å…¶åç§°ï¼Œå°†è§¦å‘æ¨¡å¼è®¾ç½®ä¸º `On push`ï¼Œå¹¶é€‰æ‹©è§¦å‘ç®¡é“æ‰§è¡Œçš„åˆ†æ”¯ã€‚
6. æ·»åŠ ä¸€ä¸ª `Node.js` æ“ä½œã€‚
7. åœ¨æ“ä½œçš„ç»ˆç«¯ä¸­æ·»åŠ è¿™äº›å‘½ä»¤ï¼š

```bash
GIT_USER=<GH_PERSONAL_ACCESS_TOKEN>
git config --global user.email "<YOUR_GH_EMAIL>"
git config --global user.name "<YOUR_GH_USERNAME>"
yarn deploy
```

åˆ›å»ºè¿™ä¸ªç®€å•çš„ç®¡é“åï¼Œæ¯æ¬¡æ¨é€åˆ°ä½ é€‰æ‹©çš„åˆ†æ”¯çš„æ–°æäº¤éƒ½ä¼šä½¿ç”¨ `yarn deploy` å°†ä½ çš„ç½‘ç«™éƒ¨ç½²åˆ° GitHub Pagesã€‚é˜…è¯»[æœ¬æŒ‡å—](https://buddy.works/guides/react-docusaurus)ä»¥äº†è§£æœ‰å…³ä¸º Docusaurus è®¾ç½® CI/CD ç®¡é“çš„æ›´å¤šä¿¡æ¯ã€‚

### ä½¿ç”¨ Azure Pipelines {#using-azure-pipelines}

1. å¦‚æœä½ è¿˜æ²¡æœ‰ï¼Œè¯·åœ¨ [Azure Pipelines](https://azure.microsoft.com/en-us/services/devops/pipelines/) æ³¨å†Œã€‚
2. åˆ›å»ºä¸€ä¸ªç»„ç»‡ã€‚åœ¨ç»„ç»‡å†…ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶ä» GitHub è¿æ¥ä½ çš„ä»“åº“ã€‚
3. è½¬åˆ° https://github.com/settings/tokens å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„[ä¸ªäººè®¿é—®ä»¤ç‰Œ](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)ï¼ŒèŒƒå›´ä¸º `repo`ã€‚
4. åœ¨é¡¹ç›®é¡µé¢ï¼ˆçœ‹èµ·æ¥åƒ `https://dev.azure.com/ORG_NAME/REPO_NAME/_build`ï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹æ–‡æœ¬åˆ›å»ºä¸€ä¸ªæ–°ç®¡é“ã€‚å¦å¤–ï¼Œç‚¹å‡»ç¼–è¾‘å¹¶æ·»åŠ ä¸€ä¸ªåä¸º `GH_TOKEN` çš„æ–°ç¯å¢ƒå˜é‡ï¼Œå…¶å€¼ä¸ºä½ æ–°ç”Ÿæˆçš„ä»¤ç‰Œï¼Œç„¶åæ˜¯ `GH_EMAIL`ï¼ˆä½ çš„ç”µå­é‚®ä»¶åœ°å€ï¼‰å’Œ `GH_NAME`ï¼ˆä½ çš„ GitHub ç”¨æˆ·åï¼‰ã€‚ç¡®ä¿å°†å®ƒä»¬æ ‡è®°ä¸ºæœºå¯†ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ä»“åº“æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ªåä¸º `azure-pipelines.yml` çš„æ–‡ä»¶ã€‚

```yml title="azure-pipelines.yml"
trigger:
  - main

pool:
  vmImage: ubuntu-latest

steps:
  - checkout: self
    persistCredentials: true

  - task: NodeTool@0
    inputs:
      versionSpec: '18'
    displayName: Install Node.js

  - script: |
      git config --global user.name "${GH_NAME}"
      git config --global user.email "${GH_EMAIL}"
      git checkout -b main
      echo "machine github.com login ${GH_NAME} password ${GH_TOKEN}" > ~/.netrc
      yarn install
      GIT_USER="${GH_NAME}" yarn deploy
    env:
      GH_NAME: $(GH_NAME)
      GH_EMAIL: $(GH_EMAIL)
      GH_TOKEN: $(GH_TOKEN)
    displayName: Install and build
```

### ä½¿ç”¨ Drone {#using-drone}

1. åˆ›å»ºä¸€ä¸ªæ–°çš„ SSH å¯†é’¥ï¼Œå®ƒå°†æˆä¸ºä½ é¡¹ç›®çš„[éƒ¨ç½²å¯†é’¥](https://docs.github.com/en/free-pro-team@latest/developers/overview/managing-deploy-keys#deploy-keys)ã€‚
2. å°†ä½ çš„ç§é’¥å’Œå…¬é’¥å‘½åä¸ºç‰¹å®šçš„åç§°ï¼Œä»¥å…è¦†ç›–ä½ çš„å…¶ä»– [SSH å¯†é’¥](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)ã€‚
3. è½¬åˆ° `https://github.com/USERNAME/REPO/settings/keys` å¹¶é€šè¿‡ç²˜è´´ä½ åˆšåˆšç”Ÿæˆçš„å…¬é’¥æ¥æ·»åŠ ä¸€ä¸ªæ–°çš„éƒ¨ç½²å¯†é’¥ã€‚
4. æ‰“å¼€ä½ çš„ Drone.io ä»ªè¡¨æ¿å¹¶ç™»å½•ã€‚URL çœ‹èµ·æ¥åƒ `https://cloud.drone.io/USERNAME/REPO`ã€‚
5. ç‚¹å‡»ä»“åº“ï¼Œç‚¹å‡»æ¿€æ´»ä»“åº“ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªåä¸º `git_deploy_private_key` çš„ secretï¼Œå…¶å€¼ä¸ºä½ åˆšåˆšç”Ÿæˆçš„ç§é’¥ã€‚
6. åœ¨ä½ çš„ä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.drone.yml`ï¼Œå†…å®¹å¦‚ä¸‹ã€‚

```yml title=".drone.yml"
kind: pipeline
type: docker
trigger:
  event:
    - tag
- name: Website
  image: node
  commands:
    - mkdir -p $HOME/.ssh
    - ssh-keyscan -t rsa github.com >> $HOME/.ssh/known_hosts
    - echo "$GITHUB_PRIVATE_KEY" > "$HOME/.ssh/id_rsa"
    - chmod 0600 $HOME/.ssh/id_rsa
    - cd website
    - yarn install
    - yarn deploy
  environment:
    USE_SSH: true
    GITHUB_PRIVATE_KEY:
      from_secret: git_deploy_private_key
```

ç°åœ¨ï¼Œæ¯å½“ä½ å‘ GitHub æ¨é€ä¸€ä¸ªæ–°æ ‡ç­¾æ—¶ï¼Œæ­¤è§¦å‘å™¨å°†å¯åŠ¨ drone CI ä½œä¸šæ¥å‘å¸ƒä½ çš„ç½‘ç«™ã€‚

## éƒ¨ç½²åˆ° Flightcontrol {#deploying-to-flightcontrol}

[Flightcontrol](https://www.flightcontrol.dev/?ref=docusaurus) æ˜¯ä¸€é¡¹æœåŠ¡ï¼Œå¯ç›´æ¥ä»ä½ çš„ Git ä»“åº“è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²ä½ çš„ Web åº”ç”¨ç¨‹åºåˆ° AWS Fargateã€‚å®ƒä¸ºä½ æä¾›äº†å®Œå…¨è®¿é—®æƒé™ï¼Œå¯ä»¥æ£€æŸ¥å’Œè¿›è¡ŒåŸºç¡€è®¾æ–½æ›´æ”¹ï¼Œè€Œæ²¡æœ‰ä¼ ç»Ÿ PaaS çš„é™åˆ¶ã€‚

æŒ‰ç…§ [Flightcontrol çš„ Docusaurus åˆ†æ­¥æŒ‡å—](https://www.flightcontrol.dev/docs/reference/examples/docusaurus/?ref=docusaurus)å¼€å§‹ã€‚

## éƒ¨ç½²åˆ° Koyeb {#deploying-to-koyeb}

[Koyeb](https://www.koyeb.com) æ˜¯ä¸€ä¸ªå¯¹å¼€å‘è€…å‹å¥½çš„æ— æœåŠ¡å™¨å¹³å°ï¼Œå¯ç”¨äºåœ¨å…¨çƒèŒƒå›´å†…éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚è¯¥å¹³å°å¯è®©ä½ æ— ç¼è¿è¡Œ Docker å®¹å™¨ã€Web åº”ç”¨ç¨‹åºå’Œ APIï¼Œå…·æœ‰åŸºäº git çš„éƒ¨ç½²ã€åŸç”Ÿè‡ªåŠ¨ç¼©æ”¾ã€å…¨çƒè¾¹ç¼˜ç½‘ç»œä»¥åŠå†…ç½®çš„æœåŠ¡ç½‘æ ¼å’Œå‘ç°åŠŸèƒ½ã€‚æŸ¥çœ‹ [Koyeb çš„ Docusaurus éƒ¨ç½²æŒ‡å—](https://www.koyeb.com/tutorials/deploy-docusaurus-on-koyeb)ä»¥å¼€å§‹ã€‚

## éƒ¨ç½²åˆ° Render {#deploying-to-render}

[Render](https://render.com) æä¾›[å…è´¹çš„é™æ€ç«™ç‚¹æ‰˜ç®¡](https://render.com/docs/static-sites)ï¼Œå…·æœ‰å®Œå…¨æ‰˜ç®¡çš„ SSLã€è‡ªå®šä¹‰åŸŸåã€å…¨çƒ CDN ä»¥åŠä»ä½ çš„ Git ä»“åº“æŒç»­è‡ªåŠ¨éƒ¨ç½²ã€‚æŒ‰ç…§ [Render çš„éƒ¨ç½² Docusaurus æŒ‡å—](https://render.com/docs/deploy-docusaurus)åœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹ã€‚

## éƒ¨ç½²åˆ° Qovery {#deploying-to-qovery}

[Qovery](https://www.qovery.com) æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„äº‘å¹³å°ï¼Œå¯åœ¨ä½ çš„ AWSã€Digital Ocean å’Œ Scaleway å¸æˆ·ä¸Šè¿è¡Œï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹æ‰˜ç®¡é™æ€ç«™ç‚¹ã€åç«¯ APIã€æ•°æ®åº“ã€cron ä½œä¸šå’Œæ‰€æœ‰å…¶ä»–åº”ç”¨ç¨‹åºã€‚

1. åˆ›å»ºä¸€ä¸ª Qovery å¸æˆ·ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¸æˆ·ï¼Œè¯·è®¿é—® [Qovery ä»ªè¡¨æ¿](https://console.qovery.com)åˆ›å»ºä¸€ä¸ªã€‚
2. åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚
   - ç‚¹å‡» **Create project** å¹¶ä¸ºä½ çš„é¡¹ç›®å‘½åã€‚
   - ç‚¹å‡» **Next**ã€‚
3. åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒã€‚
   - ç‚¹å‡» **Create environment** å¹¶å‘½åï¼ˆä¾‹å¦‚ stagingã€productionï¼‰ã€‚
4. æ·»åŠ ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚
   - ç‚¹å‡» **Create an application**ï¼Œå‘½åå¹¶é€‰æ‹©ä½ çš„ Docusaurus åº”ç”¨ç¨‹åºæ‰€åœ¨çš„ GitHub æˆ– GitLab ä»“åº“ã€‚
   - å®šä¹‰ä¸»åˆ†æ”¯åç§°å’Œæ ¹åº”ç”¨ç¨‹åºè·¯å¾„ã€‚
   - ç‚¹å‡» **Create**ã€‚åˆ›å»ºåº”ç”¨ç¨‹åºåï¼š
   - å¯¼èˆªåˆ°ä½ çš„åº”ç”¨ç¨‹åº **Settings**
   - é€‰æ‹© **Port**
   - æ·»åŠ ä½ çš„ Docusaurus åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç«¯å£
5. éƒ¨ç½²
   - ä½ ç°åœ¨æ‰€è¦åšçš„å°±æ˜¯å¯¼èˆªåˆ°ä½ çš„åº”ç”¨ç¨‹åºå¹¶ç‚¹å‡» **Deploy**ã€‚

![éƒ¨ç½²åº”ç”¨](https://hub.qovery.com/img/heroku/heroku-1.png)

å°±æ˜¯è¿™æ ·ã€‚è§‚å¯ŸçŠ¶æ€å¹¶ç­‰å¾…åº”ç”¨ç¨‹åºéƒ¨ç½²å®Œæˆã€‚è¦åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºï¼Œè¯·åœ¨ä½ çš„åº”ç”¨ç¨‹åºæ¦‚è§ˆä¸­ç‚¹å‡» **Action** å’Œ **Open**ã€‚

## éƒ¨ç½²åˆ° Hostman {#deploying-to-hostman}

[Hostman](https://hostman.com/) å…è®¸ä½ å…è´¹æ‰˜ç®¡é™æ€ç½‘ç«™ã€‚Hostman ä¼šè‡ªåŠ¨åŒ–ä¸€åˆ‡ï¼Œä½ åªéœ€è¦è¿æ¥ä½ çš„ä»“åº“å¹¶æŒ‰ç…§è¿™äº›ç®€å•çš„æ­¥éª¤æ“ä½œï¼š

1. åˆ›å»ºä¸€ä¸ªæœåŠ¡ã€‚

   - è¦éƒ¨ç½² Docusaurus é™æ€ç½‘ç«™ï¼Œè¯·åœ¨ä½ çš„[ä»ªè¡¨æ¿](https://dashboard.hostman.com/)çš„å·¦ä¸Šè§’ç‚¹å‡» **Create**ï¼Œç„¶åé€‰æ‹© **Front-end app or static website**ã€‚

2. é€‰æ‹©è¦éƒ¨ç½²çš„é¡¹ç›®ã€‚

   - å¦‚æœä½ ä½¿ç”¨ä½ çš„ GitHubã€GitLab æˆ– Bitbucket å¸æˆ·ç™»å½• Hostmanï¼Œä½ å°†çœ‹åˆ°åŒ…å«ä½ çš„é¡¹ç›®çš„ä»“åº“ï¼ŒåŒ…æ‹¬ç§æœ‰é¡¹ç›®ã€‚

   - é€‰æ‹©ä½ æƒ³è¦éƒ¨ç½²çš„é¡¹ç›®ã€‚å®ƒå¿…é¡»åŒ…å«é¡¹ç›®çš„æ–‡ä»¶çš„ç›®å½•ï¼ˆä¾‹å¦‚ `website`ï¼‰ã€‚

   - è¦è®¿é—®ä¸åŒçš„ä»“åº“ï¼Œè¯·ç‚¹å‡» **Connect another repository**ã€‚

   - å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ä½ çš„ Git å¸æˆ·å‡­æ®ç™»å½•ï¼Œä½ ç°åœ¨å¯ä»¥è®¿é—®å¿…è¦çš„å¸æˆ·ï¼Œç„¶åé€‰æ‹©é¡¹ç›®ã€‚

3. é…ç½®æ„å»ºè®¾ç½®ã€‚

   - æ¥ä¸‹æ¥ï¼Œå°†å‡ºç° **Website customization** çª—å£ã€‚ä»æ¡†æ¶åˆ—è¡¨ä¸­é€‰æ‹© **Static website** é€‰é¡¹ã€‚

   - **Directory with app** æŒ‡å‘æ„å»ºåå°†åŒ…å«é¡¹ç›®æ–‡ä»¶çš„ç›®å½•ã€‚å¦‚æœä½ åœ¨ç¬¬ 2 æ­¥ä¸­é€‰æ‹©äº†åŒ…å«ç½‘ç«™ï¼ˆæˆ– `my_website`ï¼‰ç›®å½•å†…å®¹çš„ä»“åº“ï¼Œåˆ™å¯ä»¥å°†å…¶ç•™ç©ºã€‚

   - Docusaurus çš„æ ‡å‡†æ„å»ºå‘½ä»¤æ˜¯ï¼š

     ```bash npm2yarn
     npm run build
     ```

   - å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ä¿®æ”¹æ„å»ºå‘½ä»¤ã€‚ä½ å¯ä»¥è¾“å…¥å¤šä¸ªç”± `&&` åˆ†éš”çš„å‘½ä»¤ã€‚

4. éƒ¨ç½²ã€‚

   - ç‚¹å‡» **Deploy** å¼€å§‹æ„å»ºè¿‡ç¨‹ã€‚

   - ä¸€æ—¦å¼€å§‹ï¼Œä½ å°†è¿›å…¥éƒ¨ç½²æ—¥å¿—ã€‚å¦‚æœä»£ç æœ‰ä»»ä½•é—®é¢˜ï¼Œä½ å°†åœ¨æ—¥å¿—ä¸­æ”¶åˆ°æŒ‡å®šé—®é¢˜åŸå› çš„è­¦å‘Šæˆ–é”™è¯¯æ¶ˆæ¯ã€‚é€šå¸¸ï¼Œæ—¥å¿—åŒ…å«ä½ éœ€è¦çš„æ‰€æœ‰è°ƒè¯•æ•°æ®ã€‚

   - éƒ¨ç½²å®Œæˆåï¼Œä½ å°†æ”¶åˆ°ä¸€å°ç”µå­é‚®ä»¶é€šçŸ¥ï¼Œå¹¶çœ‹åˆ°ä¸€æ¡æ—¥å¿—æ¡ç›®ã€‚ä¸€åˆ‡éƒ½å®Œæˆäº†ï¼ä½ çš„é¡¹ç›®å·²å¯åŠ¨å¹¶å‡†å¤‡å°±ç»ªã€‚

## éƒ¨ç½²åˆ° Surge {#deploying-to-surge}

Surge æ˜¯ä¸€ä¸ª[é™æ€ Web æ‰˜ç®¡å¹³å°](https://surge.sh/help/getting-started-with-surge)ï¼Œä½ å¯ä»¥ç”¨å®ƒåœ¨å‡ ç§’é’Ÿå†…ä»å‘½ä»¤è¡Œéƒ¨ç½²ä½ çš„ Docusaurus é¡¹ç›®ã€‚å°†ä½ çš„é¡¹ç›®éƒ¨ç½²åˆ° Surge æ—¢ç®€å•åˆå…è´¹ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰åŸŸåå’Œ SSL è¯ä¹¦ï¼‰ã€‚

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨å‡ ç§’é’Ÿå†…ä½¿ç”¨ Surge éƒ¨ç½²ä½ çš„åº”ç”¨ï¼š

1. é¦–å…ˆï¼Œä½¿ç”¨ npm è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Surgeï¼š
   ```bash npm2yarn
   npm install -g surge
   ```
2. è¦åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºç«™ç‚¹çš„é™æ€æ–‡ä»¶ï¼Œè¯·è¿è¡Œï¼š
   ```bash npm2yarn
   npm run build
   ```
3. ç„¶åï¼Œåœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•å†…è¿è¡Œæ­¤å‘½ä»¤ï¼š
   ```bash
   surge build/
   ```

é¦–æ¬¡ä½¿ç”¨ Surge çš„ç”¨æˆ·å°†è¢«æç¤ºä»å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼ˆè¿™åªå‘ç”Ÿä¸€æ¬¡ï¼‰ã€‚

ç¡®è®¤ä½ æƒ³è¦å‘å¸ƒçš„ç«™ç‚¹ä½äº `build` ç›®å½•ä¸­ã€‚æ€»æ˜¯ä¼šç»™å‡ºä¸€ä¸ªéšæœºç”Ÿæˆçš„å­åŸŸå `*.surge.sh subdomain`ï¼ˆå¯ä»¥ç¼–è¾‘ï¼‰ã€‚

### ä½¿ç”¨ä½ çš„åŸŸå {#using-your-domain}

å¦‚æœä½ æœ‰ä¸€ä¸ªåŸŸåï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²ä½ çš„ç«™ç‚¹ï¼š

```bash
surge build/ your-domain.com
```

ä½ çš„ç«™ç‚¹ç°åœ¨å…è´¹éƒ¨ç½²åœ¨ `subdomain.surge.sh` æˆ– `your-domain.com`ï¼Œå…·ä½“å–å†³äºä½ é€‰æ‹©çš„æ–¹æ³•ã€‚

### è®¾ç½® CNAME æ–‡ä»¶ {#setting-up-cname-file}

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ä½ çš„åŸŸåå­˜å‚¨åœ¨ CNAME æ–‡ä»¶ä¸­ä»¥å¤‡å°†æ¥éƒ¨ç½²ï¼š

```bash
echo subdomain.surge.sh > CNAME
```

ä½ å°†æ¥å¯ä»¥ä½¿ç”¨ `surge` å‘½ä»¤éƒ¨ç½²ä»»ä½•å…¶ä»–æ›´æ”¹ã€‚

## éƒ¨ç½²åˆ° Stormkit {#deploying-to-stormkit}

ä½ å¯ä»¥å°†ä½ çš„ Docusaurus é¡¹ç›®éƒ¨ç½²åˆ° [Stormkit](https://www.stormkit.io)ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºé™æ€ç½‘ç«™ã€å•é¡µåº”ç”¨ç¨‹åºï¼ˆSPAï¼‰å’Œæ— æœåŠ¡å™¨åŠŸèƒ½çš„éƒ¨ç½²å¹³å°ã€‚æœ‰å…³è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚é˜…[æœ¬æŒ‡å—](https://www.stormkit.io/blog/how-to-deploy-docusarous)ã€‚

## éƒ¨ç½²åˆ° QuantCDN {#deploying-to-quantcdn}

1. å®‰è£… [Quant CLI](https://docs.quantcdn.io/docs/cli/get-started)
2. é€šè¿‡[æ³¨å†Œ](https://dashboard.quantcdn.io/register)åˆ›å»ºä¸€ä¸ª QuantCDN å¸æˆ·
3. ä½¿ç”¨ `quant init` åˆå§‹åŒ–ä½ çš„é¡¹ç›®å¹¶å¡«å†™ä½ çš„å‡­æ®ï¼š
   ```bash
   quant init
   ```
4. éƒ¨ç½²ä½ çš„ç«™ç‚¹ã€‚
   ```bash
   quant deploy
   ```

æœ‰å…³éƒ¨ç½²åˆ° QuantCDN çš„æ›´å¤šç¤ºä¾‹å’Œç”¨ä¾‹ï¼Œè¯·å‚é˜…[æ–‡æ¡£](https://docs.quantcdn.io/docs/cli/continuous-integration)å’Œ[åšå®¢](https://www.quantcdn.io/blog)ã€‚

## éƒ¨ç½²åˆ° Cloudflare Pages {#deploying-to-cloudflare-pages}

[Cloudflare Pages](https://pages.cloudflare.com/) æ˜¯ä¸€ä¸ª Jamstack å¹³å°ï¼Œä¾›å‰ç«¯å¼€å‘äººå‘˜åä½œå’Œéƒ¨ç½²ç½‘ç«™ã€‚æŒ‰ç…§[æ­¤é¡µé¢](https://developers.cloudflare.com/pages/framework-guides/deploy-a-docusaurus-site/)åœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹ã€‚

## éƒ¨ç½²åˆ° Azure Static Web Apps {#deploying-to-azure-static-web-apps}

[Azure Static Web Apps](https://docs.microsoft.com/en-us/azure/static-web-apps/overview) æ˜¯ä¸€é¡¹æœåŠ¡ï¼Œå¯ç›´æ¥ä»ä»£ç ä»“åº“è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²å…¨æ ˆ Web åº”ç”¨ç¨‹åºåˆ° Azureï¼Œä»è€Œç®€åŒ–äº† CI/CD çš„å¼€å‘äººå‘˜ä½“éªŒã€‚Static Web Apps å°† Web åº”ç”¨ç¨‹åºçš„é™æ€èµ„äº§ä¸å…¶åŠ¨æ€ï¼ˆAPIï¼‰ç«¯ç‚¹åˆ†å¼€ã€‚é™æ€èµ„äº§ä»å…¨çƒåˆ†å¸ƒçš„å†…å®¹æœåŠ¡å™¨æä¾›ï¼Œä½¿å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨é™„è¿‘çš„æœåŠ¡å™¨æ›´å¿«åœ°æ£€ç´¢æ–‡ä»¶ã€‚åŠ¨æ€ API ä½¿ç”¨äº‹ä»¶é©±åŠ¨çš„åŸºäºå‡½æ•°çš„æ— æœåŠ¡å™¨æ¶æ„è¿›è¡Œæ‰©å±•ï¼Œè¿™ç§æ¶æ„æ›´å…·æˆæœ¬æ•ˆç›Šå¹¶æŒ‰éœ€æ‰©å±•ã€‚æŒ‰ç…§[è¿™ä¸ªåˆ†æ­¥æŒ‡å—](https://dev.to/azure/11-share-content-with-docusaurus-azure-static-web-apps-30hc)åœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹ã€‚

## éƒ¨ç½²åˆ° Kinsta {#deploying-to-kinsta}

[Kinsta é™æ€ç«™ç‚¹æ‰˜ç®¡](https://kinsta.com/static-site-hosting)å¯è®©ä½ å…è´¹éƒ¨ç½²å¤šè¾¾ 100 ä¸ªé™æ€ç«™ç‚¹ï¼Œå…·æœ‰è‡ªå®šä¹‰åŸŸåå’Œ SSLã€æ¯æœˆ 100 GB å¸¦å®½ä»¥åŠ 260 å¤šä¸ª Cloudflare CDN ä½ç½®ã€‚

æŒ‰ç…§æˆ‘ä»¬çš„ [Kinsta ä¸Šçš„ Docusaurus](https://kinsta.com/docs/docusaurus-example/) æ–‡ç« ï¼Œåªéœ€ç‚¹å‡»å‡ ä¸‹å³å¯å¼€å§‹ã€‚
