---
id: code-blocks
description: åœ¨ Docusaurus Markdown ä¸­å¤„ç†ä»£ç å—
slug: /markdown-features/code-blocks
---

# ä»£ç å—

import BrowserWindow from '@site/src/components/BrowserWindow';
import CodeBlock from '@theme/CodeBlock';

æ–‡æ¡£ä¸­çš„ä»£ç å—åŠŸèƒ½è¶…å¼º ğŸ’ªã€‚

## ä»£ç æ ‡é¢˜ {#code-title}

æ‚¨å¯ä»¥é€šè¿‡åœ¨è¯­è¨€åé¢æ·»åŠ ä¸€ä¸ª `title` é”®æ¥ä¸ºä»£ç å—æ·»åŠ æ ‡é¢˜ï¼ˆåœ¨å®ƒä»¬ä¹‹é—´ç•™ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚

````md
```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>ä½ å¥½, {props.name}</h1>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>ä½ å¥½, {props.name}</h1>;
}
```

```mdx-code-block
</BrowserWindow>
```

## è¯­æ³•é«˜äº® {#syntax-highlighting}

ä»£ç å—æ˜¯ç”± 3 ä¸ªåå¼•å·åŒ…è£¹çš„æ–‡æœ¬å—ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹[æ­¤å‚è€ƒ](https://mdxjs.com/docs/)ä»¥äº†è§£ MDX çš„è§„èŒƒã€‚

````md
```js
console.log('æ¯ä¸ªä»“åº“éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå‰ç¥¥ç‰©ã€‚');
```
````

ä¸ºæ‚¨çš„ä»£ç å—ä½¿ç”¨åŒ¹é…çš„è¯­è¨€å…ƒå­—ç¬¦ä¸²ï¼ŒDocusaurus å°†è‡ªåŠ¨è¿›è¡Œè¯­æ³•é«˜äº®ï¼Œç”± [Prism React Renderer](https://github.com/FormidableLabs/prism-react-renderer) æä¾›æ”¯æŒã€‚

<BrowserWindow>

```js
console.log('æ¯ä¸ªä»“åº“éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå‰ç¥¥ç‰©ã€‚');
```

</BrowserWindow>

### ä¸»é¢˜åŒ– {#theming}

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ Prism [è¯­æ³•é«˜äº®ä¸»é¢˜](https://github.com/FormidableLabs/prism-react-renderer#theming)æ˜¯ [Palenight](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/prism-react-renderer/src/themes/palenight.ts)ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ docusaurus.config.js çš„ `themeConfig` ä¸­å°† `prism` çš„ `theme` å­—æ®µæ›´æ”¹ä¸ºå¦ä¸€ä¸ªä¸»é¢˜æ¥æ›´æ”¹æ­¤è®¾ç½®ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ›´å–œæ¬¢ä½¿ç”¨ `dracula` é«˜äº®ä¸»é¢˜ï¼š

```js title="docusaurus.config.js"
import {themes as prismThemes} from 'prism-react-renderer';

export default {
  themeConfig: {
    prism: {
      // highlight-next-line
      theme: prismThemes.dracula,
    },
  },
};
```

å› ä¸º Prism ä¸»é¢˜åªæ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œå¦‚æœæ‚¨å¯¹é»˜è®¤ä¸»é¢˜ä¸æ»¡æ„ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„ä¸»é¢˜ã€‚Docusaurus å¢å¼ºäº† `github` å’Œ `vsDark` ä¸»é¢˜ä»¥æä¾›æ›´ä¸°å¯Œçš„é«˜äº®ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å¯¹[äº®è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismLight.ts)å’Œ[æš—è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismDark.ts)ä»£ç å—ä¸»é¢˜çš„å®ç°ã€‚

### æ”¯æŒçš„è¯­è¨€ {#supported-languages}

é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocusaurus é™„å¸¦äº†ä¸€éƒ¨åˆ†[å¸¸ç”¨è¯­è¨€](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/generate-prism-languages/index.ts#L10-L25)ã€‚

:::warning

ä¸€äº›æµè¡Œè¯­è¨€ï¼Œå¦‚ Javaã€C# æˆ– PHPï¼Œé»˜è®¤æƒ…å†µä¸‹æœªå¯ç”¨ã€‚

:::

è¦ä¸ºä»»ä½•å…¶ä»– [Prism æ”¯æŒçš„è¯­è¨€](https://prismjs.com/#supported-languages)æ·»åŠ è¯­æ³•é«˜äº®ï¼Œè¯·åœ¨é™„åŠ è¯­è¨€æ•°ç»„ä¸­å®šä¹‰å®ƒã€‚

:::note

æ¯ä¸ªé™„åŠ è¯­è¨€éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ Prism ç»„ä»¶åç§°ã€‚ä¾‹å¦‚ï¼ŒPrism ä¼šå°†_è¯­è¨€_ `cs` æ˜ å°„åˆ° `csharp`ï¼Œä½†åªæœ‰ `prism-csharp.js` ä½œä¸º_ç»„ä»¶_å­˜åœ¨ï¼Œæ‰€ä»¥æ‚¨éœ€è¦ä½¿ç”¨ `additionalLanguages: ['csharp']`ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ `node_modules/prismjs/components` ä»¥æ‰¾åˆ°æ‰€æœ‰å¯ç”¨çš„ç»„ä»¶ï¼ˆè¯­è¨€ï¼‰ã€‚

:::

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ä¸º PowerShell è¯­è¨€æ·»åŠ é«˜äº®ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    prism: {
      // highlight-next-line
      additionalLanguages: ['powershell'],
    },
    // ...
  },
};
```

æ·»åŠ  `additionalLanguages` åï¼Œé‡æ–°å¯åŠ¨ Docusaurusã€‚

å¦‚æœæ‚¨æƒ³ä¸º Prism å°šä¸æ”¯æŒçš„è¯­è¨€æ·»åŠ é«˜äº®ï¼Œæ‚¨å¯ä»¥ swizzle `prism-include-languages`ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic prism-include-languages
```

å®ƒå°†åœ¨æ‚¨çš„ `src/theme` æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆ `prism-include-languages.js`ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘ `prism-include-languages.js` æ¥ä¸ºè‡ªå®šä¹‰è¯­è¨€æ·»åŠ é«˜äº®æ”¯æŒï¼š

```js title="src/theme/prism-include-languages.js"
const prismIncludeLanguages = (Prism) => {
  // ...

  additionalLanguages.forEach((lang) => {
    require(`prismjs/components/prism-${lang}`);
  });

  // highlight-next-line
  require('/path/to/your/prism-language-definition');

  // ...
};
```

åœ¨ç¼–å†™æ‚¨è‡ªå·±çš„è¯­è¨€å®šä¹‰æ—¶ï¼Œæ‚¨å¯ä»¥å‚è€ƒ [Prism çš„å®˜æ–¹è¯­è¨€å®šä¹‰](https://github.com/PrismJS/prism/tree/master/components)ã€‚

æ·»åŠ è‡ªå®šä¹‰è¯­è¨€å®šä¹‰æ—¶ï¼Œæ‚¨æ— éœ€å°†è¯­è¨€æ·»åŠ åˆ° `additionalLanguages` é…ç½®æ•°ç»„ä¸­ï¼Œå› ä¸º Docusaurus åªåœ¨ Prism æä¾›çš„è¯­è¨€ä¸­æŸ¥æ‰¾ `additionalLanguages` å­—ç¬¦ä¸²ã€‚åœ¨ `prism-include-languages.js` ä¸­æ·»åŠ è¯­è¨€å¯¼å…¥å°±è¶³å¤Ÿäº†ã€‚

## è¡Œé«˜äº® {#line-highlighting}

### ä½¿ç”¨æ³¨é‡Šé«˜äº® {#highlighting-with-comments}

æ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰ `highlight-next-line`ã€`highlight-start` å’Œ `highlight-end` çš„æ³¨é‡Šæ¥é€‰æ‹©è¦é«˜äº®çš„è¡Œã€‚

````md
```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'è¿™æ®µæ–‡æœ¬è¢«é«˜äº®äº†ï¼';
  }

  return 'æ²¡æœ‰é«˜äº®çš„å†…å®¹';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'è¿™ä¸ªèŒƒå›´è¢«é«˜äº®äº†ï¼';
  }
  // highlight-end

  return 'æ²¡æœ‰é«˜äº®çš„å†…å®¹';
}
```
````

```mdx-code-block
<BrowserWindow>
```

```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'è¿™æ®µæ–‡æœ¬è¢«é«˜äº®äº†ï¼';
  }

  return 'æ²¡æœ‰é«˜äº®çš„å†…å®¹';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'è¿™ä¸ªèŒƒå›´è¢«é«˜äº®äº†ï¼';
  }
  // highlight-end

  return 'æ²¡æœ‰é«˜äº®çš„å†…å®¹';
}
```

```mdx-code-block
</BrowserWindow>
```

æ”¯æŒçš„æ³¨é‡Šè¯­æ³•ï¼š

| æ ·å¼       | è¯­æ³•                     |
| ---------- | ------------------------ |
| C é£æ ¼     | `/* ... */` å’Œ `// ...`  |
| JSX é£æ ¼   | `{/* ... */}`            |
| Bash é£æ ¼  | `# ...`                  |
| HTML é£æ ¼  | `<!-- ... -->`           |

æˆ‘ä»¬å°†å°½åŠ›æ ¹æ®è¯­è¨€æ¨æ–­ä½¿ç”¨å“ªå¥—æ³¨é‡Šæ ·å¼ï¼Œå¹¶é»˜è®¤å…è®¸_æ‰€æœ‰_æ³¨é‡Šæ ·å¼ã€‚å¦‚æœå½“å‰ä¸æ”¯æŒæŸç§æ³¨é‡Šæ ·å¼ï¼Œæˆ‘ä»¬ä¹äºæ·»åŠ ï¼æ¬¢è¿æäº¤æ‹‰å–è¯·æ±‚ã€‚è¯·æ³¨æ„ï¼Œä¸åŒçš„æ³¨é‡Šæ ·å¼æ²¡æœ‰è¯­ä¹‰ä¸Šçš„å·®å¼‚ï¼Œåªæœ‰å®ƒä»¬çš„å†…å®¹æœ‰ã€‚

æ‚¨å¯ä»¥åœ¨æ‚¨çš„ `src/css/custom.css` ä¸­ä¸ºé«˜äº®çš„ä»£ç è¡Œè®¾ç½®è‡ªå·±çš„èƒŒæ™¯é¢œè‰²ï¼Œä»¥æ›´å¥½åœ°é€‚åº”æ‚¨é€‰æ‹©çš„è¯­æ³•é«˜äº®ä¸»é¢˜ã€‚ä¸‹é¢ç»™å‡ºçš„é¢œè‰²é€‚ç”¨äºé»˜è®¤çš„é«˜äº®ä¸»é¢˜ï¼ˆPalenightï¼‰ï¼Œå› æ­¤å¦‚æœæ‚¨ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œæ‚¨éœ€è¦ç›¸åº”åœ°è°ƒæ•´é¢œè‰²ã€‚

```css title="/src/css/custom.css"
:root {
  --docusaurus-highlighted-code-line-bg: rgb(72, 77, 91);
}

/* å¦‚æœæ‚¨åœ¨æš—é»‘æ¨¡å¼ä¸‹æœ‰ä¸åŒçš„è¯­æ³•é«˜äº®ä¸»é¢˜ã€‚ */
[data-theme='dark'] {
  /* é€‚ç”¨äºæš—é»‘æ¨¡å¼è¯­æ³•é«˜äº®ä¸»é¢˜çš„é¢œè‰² */
  --docusaurus-highlighted-code-line-bg: rgb(100, 100, 100);
}
```

å¦‚æœæ‚¨è¿˜éœ€è¦ä»¥å…¶ä»–æ–¹å¼ä¸ºé«˜äº®çš„ä»£ç è¡Œè®¾ç½®æ ·å¼ï¼Œæ‚¨å¯ä»¥å®šä½ `theme-code-block-highlighted-line` CSS ç±»ã€‚

### ä½¿ç”¨å…ƒæ•°æ®å­—ç¬¦ä¸²é«˜äº® {#highlighting-with-metadata-string}

æ‚¨è¿˜å¯ä»¥åœ¨è¯­è¨€å…ƒå­—ç¬¦ä¸²ä¸­æŒ‡å®šé«˜äº®çš„è¡ŒèŒƒå›´ï¼ˆåœ¨è¯­è¨€åç•™ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚è¦é«˜äº®å¤šè¡Œï¼Œè¯·ç”¨é€—å·åˆ†éš”è¡Œå·æˆ–ä½¿ç”¨èŒƒå›´è¯­æ³•é€‰æ‹©ä¸€å—è¡Œã€‚æ­¤åŠŸèƒ½ä½¿ç”¨ `parse-number-range` åº“ï¼Œæ‚¨å¯ä»¥åœ¨ä»–ä»¬çš„é¡¹ç›®è¯¦æƒ…ä¸­æ‰¾åˆ°[æ›´å¤šè¯­æ³•](https://www.npmjs.com/package/parse-numeric-range)ã€‚

````md
```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```

```mdx-code-block
</BrowserWindow>
```

:::tip ä¼˜å…ˆä½¿ç”¨æ³¨é‡Š

åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨æ³¨é‡Šè¿›è¡Œé«˜äº®ã€‚é€šè¿‡åœ¨ä»£ç ä¸­å†…è”é«˜äº®ï¼Œå¦‚æœæ‚¨çš„ä»£ç å—å˜é•¿ï¼Œæ‚¨å°±ä¸å¿…æ‰‹åŠ¨è®¡ç®—è¡Œæ•°ã€‚å¦‚æœæ‚¨æ·»åŠ /åˆ é™¤è¡Œï¼Œæ‚¨ä¹Ÿä¸å¿…è°ƒæ•´æ‚¨çš„è¡ŒèŒƒå›´ã€‚

````diff
- ```jsx {3}
+ ```jsx {4}
  function HighlightSomeText(highlight) {
    if (highlight) {
+     console.log('æ‰¾åˆ°é«˜äº®æ–‡æœ¬');
      return 'è¿™æ®µæ–‡æœ¬è¢«é«˜äº®äº†ï¼';
    }

    return 'æ²¡æœ‰é«˜äº®çš„å†…å®¹';
  }
  ```
````

ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•æ‰©å±•é­”æ³•æ³¨é‡Šç³»ç»Ÿæ¥å®šä¹‰è‡ªå®šä¹‰æŒ‡ä»¤åŠå…¶åŠŸèƒ½ã€‚é­”æ³•æ³¨é‡Šåªæœ‰åœ¨ä¸å­˜åœ¨é«˜äº®å…ƒå­—ç¬¦ä¸²æ—¶æ‰ä¼šè¢«è§£æã€‚

:::

### è‡ªå®šä¹‰é­”æ³•æ³¨é‡Š {#custom-magic-comments}

`// highlight-next-line` å’Œ `// highlight-start` ç­‰è¢«ç§°ä¸ºâ€œé­”æ³•æ³¨é‡Šâ€ï¼Œå› ä¸ºå®ƒä»¬å°†è¢«è§£æå’Œç§»é™¤ï¼Œå®ƒä»¬çš„ç›®çš„æ˜¯ä¸ºä¸‹ä¸€è¡Œæˆ–ç”±å¼€å§‹å’Œç»“æŸæ³¨é‡Šå¯¹åŒ…å›´çš„éƒ¨åˆ†æ·»åŠ å…ƒæ•°æ®ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä¸»é¢˜é…ç½®å£°æ˜è‡ªå®šä¹‰é­”æ³•æ³¨é‡Šã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ³¨å†Œå¦ä¸€ä¸ªé­”æ³•æ³¨é‡Šï¼Œå®ƒä¼šæ·»åŠ ä¸€ä¸ª `code-block-error-line` ç±»åï¼š

```mdx-code-block
<Tabs>
<TabItem value="docusaurus.config.js">
```

```js
export default {
  themeConfig: {
    prism: {
      magicComments: [
        // è®°ä½ä¹Ÿè¦æ‰©å±•é»˜è®¤çš„é«˜äº®ç±»åï¼
        {
          className: 'theme-code-block-highlighted-line',
          line: 'highlight-next-line',
          block: {start: 'highlight-start', end: 'highlight-end'},
        },
        // highlight-start
        {
          className: 'code-block-error-line',
          line: 'è¿™å°†å‡ºé”™',
        },
        // highlight-end
      ],
    },
  },
};
```

```mdx-code-block
</TabItem>
<TabItem value="src/css/custom.css">
```

```css
.code-block-error-line {
  background-color: #ff000020;
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
  border-left: 3px solid #ff000080;
}
```

```mdx-code-block
</TabItem>
<TabItem value="myDoc.md">
```

````md
åœ¨ JavaScript ä¸­ï¼Œå°è¯•è®¿é—® `null` çš„å±æ€§ä¼šå‡ºé”™ã€‚

```js
const name = null;
// è¿™å°†å‡ºé”™
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```
````

```mdx-code-block
</TabItem>
</Tabs>
```

```mdx-code-block
<BrowserWindow>
```

åœ¨ JavaScript ä¸­ï¼Œå°è¯•è®¿é—® `null` çš„å±æ€§ä¼šå‡ºé”™ã€‚

```js
const name = null;
// è¿™å°†å‡ºé”™
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```

```mdx-code-block
</BrowserWindow>
```

å¦‚æœæ‚¨åœ¨å…ƒå­—ç¬¦ä¸²ä¸­ä½¿ç”¨æ•°å­—èŒƒå›´ï¼ˆ`{1,3-4}` è¯­æ³•ï¼‰ï¼ŒDocusaurus å°†åº”ç”¨**ç¬¬ä¸€ä¸ª `magicComments` æ¡ç›®**çš„ç±»åã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ `theme-code-block-highlighted-line`ï¼Œä½†å¦‚æœæ‚¨æ›´æ”¹ `magicComments` é…ç½®å¹¶ä½¿ç”¨ä¸åŒçš„æ¡ç›®ä½œä¸ºç¬¬ä¸€ä¸ªï¼Œå…ƒå­—ç¬¦ä¸²èŒƒå›´çš„å«ä¹‰ä¹Ÿä¼šæ”¹å˜ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ `magicComments: []` ç¦ç”¨é»˜è®¤çš„è¡Œé«˜äº®æ³¨é‡Šã€‚å¦‚æœæ²¡æœ‰é­”æ³•æ³¨é‡Šé…ç½®ï¼Œä½† Docusaurus é‡åˆ°äº†ä¸€ä¸ªåŒ…å«å…ƒå­—ç¬¦ä¸²èŒƒå›´çš„ä»£ç å—ï¼Œå®ƒå°†å‡ºé”™ï¼Œå› ä¸ºæ²¡æœ‰ç±»åå¯ä»¥åº”ç”¨â€”â€”æ¯•ç«Ÿï¼Œé«˜äº®ç±»ååªæ˜¯ä¸€ä¸ªé­”æ³•æ³¨é‡Šæ¡ç›®ã€‚

æ¯ä¸ªé­”æ³•æ³¨é‡Šæ¡ç›®å°†åŒ…å«ä¸‰ä¸ªé”®ï¼š`className`ï¼ˆå¿…éœ€ï¼‰ã€`line`ï¼ˆåº”ç”¨äºç´§éšå…¶åçš„è¡Œï¼‰ï¼Œæˆ– `block`ï¼ˆåŒ…å« `start` å’Œ `end`ï¼‰ï¼ˆåº”ç”¨äºç”±ä¸¤ä¸ªæ³¨é‡ŠåŒ…å›´çš„æ•´ä¸ªå—ï¼‰ã€‚

ä½¿ç”¨ CSS æ¥å®šä½ç±»å·²ç»å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡[swizzling](../../swizzling.mdx)æ¥é‡Šæ”¾æ­¤åŠŸèƒ½çš„å…¨éƒ¨æ½œåŠ›ã€‚

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic CodeBlock/Line
```

`Line` ç»„ä»¶å°†æ¥æ”¶ç±»ååˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®è¿™äº›ç±»åæœ‰æ¡ä»¶åœ°æ¸²æŸ“ä¸åŒçš„æ ‡è®°ã€‚

## è¡Œå· {#line-numbering}

æ‚¨å¯ä»¥é€šè¿‡åœ¨è¯­è¨€å…ƒå­—ç¬¦ä¸²ä¸­ä½¿ç”¨ `showLineNumbers` é”®æ¥ä¸ºæ‚¨çš„ä»£ç å—å¯ç”¨è¡Œå·ï¼ˆä¸è¦å¿˜è®°åœ¨é”®å‰ç›´æ¥æ·»åŠ ç©ºæ ¼ï¼‰ã€‚

````md
```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¡æ•°å™¨ä»è¡Œå· 1 å¼€å§‹ã€‚å¯ä»¥ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰çš„è®¡æ•°å™¨èµ·å§‹å€¼æ¥åˆ†å‰²å¤§çš„ä»£ç å—ä»¥æé«˜å¯è¯»æ€§ï¼š

````md
```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

## äº¤äº’å¼ä»£ç ç¼–è¾‘å™¨ {#interactive-code-editor}

ï¼ˆç”± [React Live](https://github.com/FormidableLabs/react-live) æä¾›æ”¯æŒï¼‰

æ‚¨å¯ä»¥ä½¿ç”¨ `@docusaurus/theme-live-codeblock` æ’ä»¶åˆ›å»ºä¸€ä¸ªäº¤äº’å¼ç¼–ç ç¼–è¾‘å™¨ã€‚é¦–å…ˆï¼Œå°†è¯¥æ’ä»¶æ·»åŠ åˆ°æ‚¨çš„åŒ…ä¸­ã€‚

```bash npm2yarn
npm install --save @docusaurus/theme-live-codeblock
```

æ‚¨è¿˜éœ€è¦å°†è¯¥æ’ä»¶æ·»åŠ åˆ°æ‚¨çš„ `docusaurus.config.js` ä¸­ã€‚

```js {3}
export default {
  // ...
  themes: ['@docusaurus/theme-live-codeblock'],
  // ...
};
```

è¦ä½¿ç”¨è¯¥æ’ä»¶ï¼Œè¯·åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ `live` é™„åŠ åˆ°è¯­è¨€å…ƒå­—ç¬¦ä¸²çš„ä»£ç å—ã€‚

````md
```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>ç°åœ¨æ˜¯ {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```
````

ä»£ç å—å°†è¢«æ¸²æŸ“ä¸ºä¸€ä¸ªäº¤äº’å¼ç¼–è¾‘å™¨ã€‚å¯¹ä»£ç çš„æ›´æ”¹å°†å®æ—¶åæ˜ åœ¨ç»“æœé¢æ¿ä¸Šã€‚

```mdx-code-block
<BrowserWindow>
```

```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>ç°åœ¨æ˜¯ {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### å¯¼å…¥ {#imports}

:::warning react-live å’Œå¯¼å…¥

æ— æ³•ç›´æ¥ä» react-live ä»£ç ç¼–è¾‘å™¨å¯¼å…¥ç»„ä»¶ï¼Œæ‚¨å¿…é¡»é¢„å…ˆå®šä¹‰å¯ç”¨çš„å¯¼å…¥ã€‚

:::

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ React å¯¼å…¥éƒ½æ˜¯å¯ç”¨çš„ã€‚å¦‚æœæ‚¨éœ€è¦æ›´å¤šå¯ç”¨çš„å¯¼å…¥ï¼Œè¯· swizzle react-live ä½œç”¨åŸŸï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-live-codeblock ReactLiveScope -- --eject
```

```jsx title="src/theme/ReactLiveScope/index.js"
import React from 'react';

// highlight-start
const ButtonExample = (props) => (
  <button
    {...props}
    style={{
      backgroundColor: 'white',
      color: 'black',
      border: 'solid red',
      borderRadius: 20,
      padding: 10,
      cursor: 'pointer',
      ...props.style,
    }}
  />
);
// highlight-end

// åœ¨æ­¤å¤„æ·»åŠ æ‚¨éœ€è¦çš„ react-live å¯¼å…¥
const ReactLiveScope = {
  React,
  ...React,
  // highlight-next-line
  ButtonExample,
};

export default ReactLiveScope;
```

`ButtonExample` ç»„ä»¶ç°åœ¨å¯ä»¥ä½¿ç”¨äº†ï¼š

```mdx-code-block
<BrowserWindow>
```

```jsx live
function MyPlayground(props) {
  return (
    <div>
      <ButtonExample onClick={() => alert('å˜¿ï¼')}>ç‚¹æˆ‘</ButtonExample>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### å‘½ä»¤å¼æ¸²æŸ“ (noInline)

å½“æ‚¨çš„ä»£ç è·¨è¶Šå¤šä¸ªç»„ä»¶æˆ–å˜é‡æ—¶ï¼Œåº”ä½¿ç”¨ `noInline` é€‰é¡¹ä»¥é¿å…é”™è¯¯ã€‚

````md
```jsx live noInline
const project = 'Docusaurus';

const Greeting = () => <p>ä½ å¥½ {project}ï¼</p>;

render(<Greeting />);
```
````

ä¸æ™®é€šçš„äº¤äº’å¼ä»£ç å—ä¸åŒï¼Œå½“ä½¿ç”¨ `noInline` æ—¶ï¼ŒReact Live ä¸ä¼šå°†æ‚¨çš„ä»£ç åŒ…è£…åœ¨å†…è”å‡½æ•°ä¸­æ¥æ¸²æŸ“å®ƒã€‚

æ‚¨éœ€è¦åœ¨ä»£ç æœ«å°¾æ˜¾å¼è°ƒç”¨ `render()` æ¥æ˜¾ç¤ºè¾“å‡ºã€‚

````mdx-code-block
<BrowserWindow>

```jsx live noInline
const project = "Docusaurus";

const Greeting = () => (
  <p>ä½ å¥½ {project}ï¼</p>
);

render(
  <Greeting />
);
```

</BrowserWindow>
````

## åœ¨ä»£ç å—ä¸­ä½¿ç”¨ JSX æ ‡è®° {#using-jsx-markup}

Markdown ä¸­çš„ä»£ç å—æ€»æ˜¯å°†å…¶å†…å®¹ä¿ç•™ä¸ºçº¯æ–‡æœ¬ï¼Œè¿™æ„å‘³ç€æ‚¨ä¸èƒ½åšç±»ä¼¼è¿™æ ·çš„äº‹æƒ…ï¼š

```ts
type EditUrlFunction = (params: {
  // è¿™ä¸ä¼šå˜æˆä¸€ä¸ªé“¾æ¥ï¼ˆæœ‰å……åˆ†çš„ç†ç”±ï¼ï¼‰
  version: <a href="/docs/versioning">Version</a>;
  versionDocsDirPath: string;
  docPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

å¦‚æœæ‚¨æƒ³åµŒå…¥ HTML æ ‡è®°ï¼Œå¦‚é”šé“¾æ¥æˆ–ç²—ä½“ç±»å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `<pre>` æ ‡ç­¾ã€`<code>` æ ‡ç­¾æˆ– `<CodeBlock>` ç»„ä»¶ã€‚

```jsx
<pre>
  <b>è¾“å…¥ï¼š</b>1 2 3 4{'\n'}
  <b>è¾“å‡ºï¼š</b>"366300745"{'\n'}
</pre>
```

<BrowserWindow>
  <pre>
    <b>{'è¾“å…¥ï¼š'}</b>
    {'1 2 3 4\n'}
    <b>{'è¾“å‡ºï¼š'}</b>
    {'"366300745"\n'}
  </pre>
</BrowserWindow>

:::warning MDX å¯¹ç©ºç™½ä¸æ•æ„Ÿ

MDX ä¸ JSX çš„è¡Œä¸ºä¸€è‡´ï¼šæ¢è¡Œç¬¦ï¼Œå³ä½¿åœ¨ `<pre>` å†…éƒ¨ï¼Œä¹Ÿä¼šè¢«è½¬æ¢ä¸ºç©ºæ ¼ã€‚æ‚¨å¿…é¡»æ˜¾å¼åœ°å†™å‡ºæ¢è¡Œç¬¦æ‰èƒ½æ‰“å°å‡ºæ¥ã€‚

:::

:::warning

è¯­æ³•é«˜äº®ä»…é€‚ç”¨äºçº¯å­—ç¬¦ä¸²ã€‚Docusaurus ä¸ä¼šå°è¯•è§£æåŒ…å« JSX å­é¡¹çš„ä»£ç å—å†…å®¹ã€‚

:::

## å¤šè¯­è¨€æ”¯æŒä»£ç å— {#multi-language-support-code-blocks}

ä½¿ç”¨ MDXï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åœ¨æ–‡æ¡£ä¸­åˆ›å»ºäº¤äº’å¼ç»„ä»¶ï¼Œä¾‹å¦‚ï¼Œç”¨å¤šç§ç¼–ç¨‹è¯­è¨€æ˜¾ç¤ºä»£ç å¹¶ä½¿ç”¨é€‰é¡¹å¡ç»„ä»¶åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚

æˆ‘ä»¬æ²¡æœ‰ä¸ºå¤šè¯­è¨€æ”¯æŒä»£ç å—å®ç°ä¸€ä¸ªä¸“é—¨çš„ç»„ä»¶ï¼Œè€Œæ˜¯åœ¨ classic ä¸»é¢˜ä¸­å®ç°äº†ä¸€ä¸ªé€šç”¨çš„ [`<Tabs>`](./markdown-features-tabs.mdx) ç»„ä»¶ï¼Œä»¥ä¾¿æ‚¨ä¹Ÿå¯ä»¥å°†å…¶ç”¨äºå…¶ä»–éä»£ç åœºæ™¯ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¯æ‚¨å¦‚ä½•åœ¨æ–‡æ¡£ä¸­æ‹¥æœ‰å¤šè¯­è¨€ä»£ç é€‰é¡¹å¡ã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªè¯­è¨€å—ä¸Šæ–¹å’Œä¸‹æ–¹çš„ç©ºè¡Œæ˜¯**æœ‰æ„çš„**ã€‚è¿™æ˜¯ [MDX çš„ä¸€ä¸ªå½“å‰é™åˆ¶](./markdown-features-react.mdx#markdown-and-jsx-interoperability)ï¼šæ‚¨å¿…é¡»åœ¨ Markdown è¯­æ³•å‘¨å›´ç•™å‡ºç©ºè¡Œï¼ŒMDX è§£æå™¨æ‰èƒ½çŸ¥é“å®ƒæ˜¯ Markdown è¯­æ³•è€Œä¸æ˜¯ JSXã€‚

````jsx
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="js" label="JavaScript">

```js
function helloWorld() {
  console.log('ä½ å¥½ï¼Œä¸–ç•Œï¼');
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("ä½ å¥½ï¼Œä¸–ç•Œï¼")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("ä½ å¥½ï¼Œä¸–ç•Œ");
  }
}
```

</TabItem>
</Tabs>
````

æ‚¨å°†å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š

```mdx-code-block
<BrowserWindow>
<Tabs>
<TabItem value="js" label="JavaScript">
```

```js
function helloWorld() {
  console.log('ä½ å¥½ï¼Œä¸–ç•Œï¼');
}
```

```mdx-code-block
</TabItem>
<TabItem value="py" label="Python">
```

```py
def hello_world():
  print("ä½ å¥½ï¼Œä¸–ç•Œï¼")
```

```mdx-code-block
</TabItem>
<TabItem value="java" label="Java">
```

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("ä½ å¥½ï¼Œä¸–ç•Œ");
  }
}
```

```mdx-code-block
</TabItem>
</Tabs>
</BrowserWindow>
```

å¦‚æœæ‚¨æœ‰å¤šä¸ªè¿™æ ·çš„å¤šè¯­è¨€ä»£ç é€‰é¡¹å¡ï¼Œå¹¶ä¸”æƒ³è¦åœ¨é€‰é¡¹å¡å®ä¾‹ä¹‹é—´åŒæ­¥é€‰æ‹©ï¼Œè¯·å‚é˜…[åŒæ­¥é€‰é¡¹å¡é€‰æ‹©éƒ¨åˆ†](markdown-features-tabs.mdx#syncing-tab-choices)ã€‚

### Docusaurus npm2yarn remark æ’ä»¶ {#npm2yarn-remark-plugin}

åŒæ—¶ç”¨ npm å’Œ Yarn æ˜¾ç¤º CLI å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š

```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```

Docusaurus å¼€ç®±å³ç”¨åœ°æä¾›äº†è¿™æ ·ä¸€ä¸ªå®ç”¨å·¥å…·ï¼Œä½¿æ‚¨ä¸å¿…æ¯æ¬¡éƒ½ä½¿ç”¨ `Tabs` ç»„ä»¶ã€‚è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œé¦–å…ˆå¦‚ä¸Šæ‰€è¿°å®‰è£… `@docusaurus/remark-plugin-npm2yarn` åŒ…ï¼Œç„¶ååœ¨ `docusaurus.config.js` ä¸­ï¼Œä¸ºæ‚¨éœ€è¦æ­¤åŠŸèƒ½çš„æ’ä»¶ï¼ˆdocã€blogã€pages ç­‰ï¼‰çš„ `remarkPlugins` é€‰é¡¹ä¸­æ³¨å†Œå®ƒã€‚ï¼ˆæœ‰å…³é…ç½®æ ¼å¼çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[æ–‡æ¡£é…ç½®](../../api/plugins/plugin-content-docs.mdx#ex-config)ï¼‰

```js title="docusaurus.config.js"
export default {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-start
          remarkPlugins: [
            [require('@docusaurus/remark-plugin-npm2yarn'), {sync: true}],
          ],
          // highlight-end
        },
        pages: {
          // highlight-next-line
          remarkPlugins: [require('@docusaurus/remark-plugin-npm2yarn')],
        },
        blog: {
          // highlight-start
          remarkPlugins: [
            [
              require('@docusaurus/remark-plugin-npm2yarn'),
              {converters: ['pnpm']},
            ],
          ],
          // highlight-end
          // ...
        },
      },
    ],
  ],
};
```

ç„¶åé€šè¿‡å‘ä»£ç å—æ·»åŠ  `npm2yarn` é”®æ¥ä½¿ç”¨å®ƒï¼š

````md
```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```
````

#### é…ç½® {#npm2yarn-remark-plugin-configuration}

| é€‰é¡¹         | ç±»å‹      | é»˜è®¤å€¼                | æè¿°                                     |
| ------------ | --------- | --------------------- | ---------------------------------------- |
| `sync`       | `boolean` | `false`               | æ˜¯å¦åœ¨æ‰€æœ‰ä»£ç å—ä¹‹é—´åŒæ­¥æ‰€é€‰çš„è½¬æ¢å™¨ã€‚     |
| `converters` | `array`   | `'yarn'`, `'pnpm'` | è¦ä½¿ç”¨çš„è½¬æ¢å™¨åˆ—è¡¨ã€‚è½¬æ¢å™¨çš„é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè½¬æ¢å™¨å°†ç”¨ä½œé»˜è®¤é€‰æ‹©ã€‚ |

## åœ¨ JSX ä¸­ä½¿ç”¨ {#usage-in-jsx}

åœ¨ Markdown ä¹‹å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `@theme/CodeBlock` ç»„ä»¶æ¥è·å¾—ç›¸åŒçš„è¾“å‡ºã€‚

```jsx
import CodeBlock from '@theme/CodeBlock';

export default function MyReactPage() {
  return (
    <div>
      {/* highlight-start */}
      <CodeBlock
        language="jsx"
        title="/src/components/HelloCodeTitle.js"
        showLineNumbers>
        {`function HelloCodeTitle(props) {
  return <h1>ä½ å¥½, {props.name}</h1>;
}`}
      </CodeBlock>
      {/* highlight-end */}
    </div>
  );
}
```

```mdx-code-block
<BrowserWindow>
  <CodeBlock
    language="jsx"
    title="/src/components/HelloCodeTitle.js"
    showLineNumbers>
    {`function HelloCodeTitle(props) {
  return <h1>ä½ å¥½, {props.name}</h1>;
}`}
  </CodeBlock>
</BrowserWindow>
```

æ¥å—çš„ props æ˜¯ `language`ã€`title` å’Œ `showLineNumbers`ï¼Œä¸æ‚¨ç¼–å†™ Markdown ä»£ç å—çš„æ–¹å¼ç›¸åŒã€‚

è™½ç„¶ä¸é¼“åŠ±ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªåƒ `metastring='{1-2} title="/src/components/HelloCodeTitle.js" showLineNumbers'` è¿™æ ·çš„ `metastring` propï¼Œè¿™æ­£æ˜¯ Markdown ä»£ç å—åœ¨åº•å±‚å¤„ç†çš„æ–¹å¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨[ä½¿ç”¨æ³¨é‡Šæ¥é«˜äº®è¡Œ](#highlighting-with-comments)ã€‚

å¦‚[å‰æ‰€è¿°](#using-jsx-markup)ï¼Œè¯­æ³•é«˜äº®ä»…åœ¨å­é¡¹æ˜¯ç®€å•å­—ç¬¦ä¸²æ—¶åº”ç”¨ã€‚
